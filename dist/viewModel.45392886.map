{"version":3,"sources":["js/viewModel.js"],"names":["AppViewModel","values","getProductsByVinURL","authToken","bodyData","JSON","stringify","self","defaultIndex","cardHeight","showSelectedProductsDrawer","ko","observable","duration","loanTerm","isSearchingByPrice","isDragging","allDraggables","productsWithDetails","observableArray","activeProductIndex","activeProductRates","activeRateIndex","activeInputIndex","activeCoverage","activeDeductible","vehicleDetails","planCost","productCount","monthlyCost","computed","toFixed","handleProductsWrapperDragged","returnedValue","pop","productDetails","Rates","RatedTerms","makeCardsDraggable","$","columnData","domElement","callback","bindingValue","RatedCoverage","DisplayName","RatedDeductible","elementChildrenCount","length","draggableElement","offsetDifference","TweenMax","to","y","handleCostWrapperDragged","handleInputFilledOut","console","log","inputMarginTop","incrementInputIndex","data","index","formData","isCurrent","decrementInputIndex","getQuote","loadProducts","each","left","inputValue","displayName","isRequired","type","callBack","loadVehicleDetails","value","isComplete","VIN","tempVIN","vehicleApi","ajax","url","success","result","Results","async","products","productId","InternalProductId","productObject","isSelected","responseJSON","rates","push","contentType","headers","Authorization","error","elementChildren","children","css","height","snapArray","Array","i","generateDraggableIndex","value01","value02","Math","abs","round","animateAllCards","addClass","opacity","transform","removeClass","newDraggable","Draggable","create","edgeResistance","throwProps","snap","zIndexBoost","maxDuration","onClick","onDrag","draggableIndex","onThrowUpdate","onThrowComplete","endY","showHideOptionsDrawer","addProductWithRate","generatePlanCostAndProductCount","removeProductWithRate","listenForKeyDown","keydown","event","which","preventDefault","totalPlanCost","productsCount","DealerCost","init","top","document","ready","applyBindings","getElementById"],"mappings":"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","file":"viewModel.45392886.map","sourceRoot":"..","sourcesContent":["function AppViewModel() {\n\n    var values = {};\n\n    values.getProductsByVinURL = 'https://tlcsvcapi.uat.taillight.xyz/RSS.SPAN.BusinessServices/restvehicleproductsvc.svc/RetrieveVehicleProductsByVIN';\n\n    values.authToken = 'eyJ0eXAiOiJVU0VSQUNDT1VOVCIsImFsZyI6Mn0.eyJqdGkiOiI5OTZlMmE0MC1hODVmLTQ2YzktYTQ0ZS1kNjU4NGJjYjAyMjQiLCJzdWIiOiI1NjIwZmQxZmMyNTcxNzFmZWMxOWYzMjY7ZWFzeWNhcmVhZG1pbjs1NjE2YTU5ZDQ5M2ZiNzFiZGMxNDkyYTUiLCJhdWQiOiJyaXN0a2VuLmNvbSIsIm5iZiI6IjE1MjAzNjk5NDgiLCJleHAiOiIxNTIwNDU2MzQ4IiwiQ2xhaW1zIjpbeyJLZXkiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiLCJWYWx1ZSI6IlNQQU4gQURNSU4ifV19.okOG2OGJCmCDkOU1l3kRdCGnnsNqaAGrJyS4VN7YBH4=';\n\n    values.bodyData = JSON.stringify({\"dateOfSale\":\"2018-03-06\",\"dealerAccountCode\":\"014996\",\"makeModelInfo\":null,\"partnerSpecificEligibility\":[{\"key\":\"dealSaleType\",\"value\":\"RetailFinanced\"}],\"productPlanType\":null,\"providerCode\":\"EASYCARE\",\"vehicleCertification\":\"None\",\"vehicleIdentificationNumber\":\"1FT7W2B69GEA00053\",\"vehicleInservice\":null,\"vehicleOdometer\":\"1000\",\"vehicleUsageTypes\":[\"Personal\"],\"quoteSessionNumber\":\"94763b6d-5429-4c2f-9876-55a46821b9e7\",\"productCodeFilters\":null});\n\n    var self = this;\n\n    // The starting position of the app - This sets how many 'cards' from the top the 'focus' section is plus a 'cardHeight' in Pixels\n    self.defaultIndex = 2;\n    self.cardHeight = 120;\n    self.showSelectedProductsDrawer = ko.observable(false);\n\n    // Local variable for our animation duration\n    var duration = 0.25;\n\n    // Temp Loan term var\n    self.loanTerm = ko.observable(48);\n\n    // Boolean value that decides if the user is searching by price, or by term and miles\n    self.isSearchingByPrice = true;\n\n    // Boolean to stop certain user events if draggable or throw is happening\n    self.isDragging = ko.observable(false);\n\n    //Array that we use to store our draggables in so that we can garbage collect later\n    self.allDraggables = [];\n\n    // This array is our main source of Data for the app\n    self.productsWithDetails = ko.observableArray();\n\n    // Vars for setting the indexes\n    self.activeProductIndex = ko.observable(self.defaultIndex);\n    self.activeProductRates = ko.observableArray();\n    self.activeRateIndex = ko.observable(self.defaultIndex);\n    self.activeInputIndex = ko.observable(0);\n\n    // Vars for display Coverages and Deductibles and other information\n    self.activeCoverage = ko.observable();\n    self.activeDeductible = ko.observable();\n\n    self.vehicleDetails = ko.observable();\n\n    self.planCost = ko.observable(0);\n    self.productCount = ko.observable(0);\n    self.monthlyCost = ko.computed(function(){\n        return (self.planCost() / self.loanTerm()).toFixed(2)\n    });\n\n    /*\n     *\n     *  Event handler callbacks that get triggered once a column on the UI completes its 'drag'\n     *\n     */\n    // Handle completion of products dragged\n    self.handleProductsWrapperDragged = function(returnedValue){\n\n        //Remove our original 'costs' draggable from the DOM, as its contents will have changed. Create a new one\n        self.allDraggables.pop();\n\n        // Update our activeProductRates Array with our new rates\n        self.activeProductRates(self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedTerms);\n\n        // And create a new draggable based on the updated contents of the dom element\n        self.makeCardsDraggable($(self.columnData[1].domElement), self.columnData[1].callback, self.columnData[1].bindingValue);\n\n        // And update our coverage and deductible vars\n        self.activeCoverage(self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedCoverage.DisplayName);\n        self.activeDeductible(self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedDeductible.DisplayName);\n\n        // Get the length of our updated list of rates\n        var elementChildrenCount = self.activeProductRates().length,\n            draggableElement = $(self.columnData[1].domElement);\n\n        //If our rates list is less than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n\n            var offsetDifference = (self.defaultIndex) - elementChildrenCount;\n            TweenMax.to(draggableElement, duration, {\n                y: (offsetDifference + 1) * self.cardHeight,\n            });\n        } else {\n            TweenMax.to(draggableElement, duration, {\n                y: 0\n            });\n        }\n    };\n\n    self.handleCostWrapperDragged = function(returnedValue){\n        //Set our activeCost Index\n        self.activeRateIndex(returnedValue);\n    };\n\n    self.handleInputFilledOut = function(){\n        console.log('One input filled out');\n    };\n\n    self.inputMarginTop = ko.observable(0);\n\n    self.incrementInputIndex = function(data){\n        if( data.index < self.formData.length -1 ) {\n            data.isCurrent(false);\n            self.formData[data.index + 1].isCurrent(true)\n            self.activeInputIndex(data.index + 1);\n            self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        }\n        return\n    };\n\n    self.decrementInputIndex = function(data){\n        if( data.index > 0 ) {\n            data.isCurrent(false);\n            self.formData[data.index - 1].isCurrent(true);\n            self.activeInputIndex(data.index - 1);\n            self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        }\n        return\n    };\n\n    // Handles the user tapping the get quote button\n    self.getQuote = function(){\n\n        // Load our products\n        self.loadProducts();\n        // Make our cards draggable\n        $.each(self.columnData, function(index){\n            self.makeCardsDraggable($(self.columnData[index].domElement), self.columnData[index].callback, self.columnData[index].bindingValue);\n        });\n\n        TweenMax.to('.input-view', duration, {\n            left: '-100%'\n        });\n        TweenMax.to('.products-view', duration, {\n            left: 0\n        });\n    };\n\n    /*\n     *\n     * UI Draggable\n     *\n     */\n\n    // Each object in this array represents a column in our draggable UI - Included are the dom element to be selected, a reference to a callback and the KO observable that it updates.\n    self.columnData = [\n        {\n            index: 0,\n            domElement: '.products-wrapper',\n            callback: self.handleProductsWrapperDragged,\n            bindingValue: self.activeProductIndex\n        },\n        {\n            index: 1,\n            domElement: '.cost-wrapper',\n            callback: self.handleCostWrapperDragged,\n            bindingValue: self.activeRateIndex\n        }\n    ];\n\n    self.formData = [\n        {\n            index: 0,\n            inputValue: \"vehicleVin\",\n            displayName: \"VIN Number\",\n            isRequired: true,\n            type: \"text\",\n            callBack: function(){\n                self.loadVehicleDetails(this.value());\n            },\n            value: ko.observable(),\n            isCurrent: ko.observable(true),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 1,\n            inputValue: \"purchasePrice\",\n            displayName: \"Purchase Price\",\n            isRequired: true,\n            type: \"text\",\n            callBack: false,\n            value: ko.observable(),\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 2,\n            inputValue: \"purchaseDate\",\n            displayName: \"Purchase Date\",\n            isRequired: true,\n            type: \"text\",\n            callBack: false,\n            value: ko.observable(),\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 3,\n            inputValue: \"submit\",\n            displayName: \"\",\n            isRequired: true,\n            type: \"button\",\n            callBack: function(){\n                self.getQuote();\n            },\n            value: null,\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        }\n    ];\n\n\n    /*\n    *\n    * Data retrieval and object creation functions\n    *\n    */\n\n    //Retrieve the vehicle details from the VIN\n    self.loadVehicleDetails = function(VIN){\n\n        console.log(VIN);\n\n        var tempVIN = '3VW2K7AJ0FM30377';\n\n        if(VIN) {\n            var vehicleApi = 'https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVin/' + VIN + '?format=json';\n\n            $.ajax({url: vehicleApi,\n                success: function(result){\n                    self.vehicleDetails(result.Results);\n                },\n                async: true});\n\n            console.log(self.vehicleDetails());\n        }\n    };\n\n    //load products\n    self.loadProducts = function(){\n        $.ajax({url: './mock_data/products.json',\n            success: function(result){\n                        $.each(result.products, function(index){\n\n                            var productId = result.products[index].InternalProductId;\n\n                            var productDetails = $.ajax({url: './mock_data/' + productId + '.json',\n                                success: function(result) {\n                                    return result\n                                },\n                                async: false});\n\n                            var productObject = {\n                                isSelected: ko.observable(false),\n                                DisplayName: result.products[index].DisplayName,\n                                InternalProductId: productId,\n                                productDetails: productDetails.responseJSON\n                            };\n\n                            // Create an is selected observable for each of our rates\n                            var rates = productObject.productDetails.Rates[0].RatedTerms;\n                            $.each(rates, function(index){\n                                rates[index].isSelected = ko.observable(false);\n                            });\n\n                            self.productsWithDetails.push(productObject);\n                        });\n                    },\n            async: false});\n\n        // Update other data vars\n        self.activeProductRates(self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedTerms);\n        self.activeCoverage(self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedCoverage.DisplayName);\n        self.activeDeductible(self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedDeductible.DisplayName);\n\n        console.log(self.productsWithDetails());\n\n        $.ajax({\n            url: values.getProductsByVinURL,\n            contentType: 'application/json',\n            type: 'POST',\n            headers: {\n                Authorization: values.authToken\n            },\n            data: values.bodyData,\n            success: function(data){\n                console.log(data);\n            },\n            error: function(error){\n                console.log(error);\n            }\n        });\n    };\n\n\n    //Makes the selected elements on the DOM draggable\n    self.makeCardsDraggable = function(draggableElement, callBack, bindingValue){\n\n        // Make our draggable columns draggable\n        var elementChildren = $(draggableElement).children(),\n            elementChildrenCount = $(elementChildren).length;\n\n        // Set all our cards height to the self.cardHeight variable\n        $(elementChildren).css({ height: self.cardHeight + 'px'});\n        // Also set the height of our active-card-frame\n        $('.active-card-frame').css({ height: self.cardHeight + 'px'});\n\n        // Generate a list of snap values\n        var snapArray = new Array();\n        for(var i = -self.defaultIndex; i < elementChildrenCount - self.defaultIndex; i++){\n            snapArray.push( -(i * self.cardHeight));\n        }\n\n        //If our rates list is less than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n\n            var offsetDifference = (self.defaultIndex) - elementChildrenCount;\n            TweenMax.to(draggableElement, duration, {\n                y: (offsetDifference + 1) * self.cardHeight\n            });\n        } else {\n            TweenMax.to(draggableElement, duration, {\n                y: 0\n            });\n        }\n\n        // Function to return the index of the card that is in the 'active-card-frame'\n        var generateDraggableIndex = function(value01, value02){\n            return Math.abs(Math.round((value01/value02)) - self.defaultIndex);\n        };\n\n        // Set the default binding values for the cards\n        if( elementChildrenCount == 1){\n            bindingValue(0);\n        } else if ( elementChildrenCount == 2 ) {\n            bindingValue(1);\n        } else {\n            bindingValue(self.defaultIndex);\n        }\n\n        var animateAllCards = function(children, index){\n            $.each(children, function(i){\n                if( i === index ){\n                    $(elementChildren[i]).children().addClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 1,\n                        transform: 'scale3d(1, 1, 1)'\n                    });\n                } else if (i === index - 1 || i === index + 1){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.8,\n                        transform: 'scale3d(0.95, 1, 1)'\n                    });\n                } else if (i === index - 2 || i === index + 2){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.6,\n                        transform: 'scale3d(0.9, 1, 1)'\n                    });\n                } else if (i === index - 3 || i === index + 3){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.4,\n                        transform: 'scale3d(0.85, 1, 1)'\n                    });\n                } else if (i === index - 4 || i === index + 4){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.2,\n                        transform: 'scale3d(0.8, 1, 1)'\n                    });\n                } else if (i < index - 4 || i > index + 4) {\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0\n                    });\n                }\n            });\n        };\n\n\n        // Call our animated card methods for the first time...\n        animateAllCards(elementChildren, self.defaultIndex);\n\n        // However, if the total number of children is less than our defaultIndex (2) the first one in the array needs to be set as 'active'\n        if( elementChildrenCount <= self.defaultIndex ){\n            if( elementChildrenCount == 1 || elementChildrenCount ==  self.defaultIndex ){\n                $(elementChildren[0]).children('.card-content').addClass('active-product');\n                TweenMax.to($(elementChildren[0]).children('.card-content'), duration, {\n                    opacity: 1,\n                    transform: 'scale3d(1, 1, 1)'\n                });\n            }\n        }\n\n        //Create the draggable element and assign it a var\n        var newDraggable = Draggable.create(draggableElement, {\n            type: \"y\",\n            edgeResistance: 0.95,\n            throwProps:true,\n            snap: snapArray,\n            zIndexBoost: false,\n            maxDuration: duration,\n            onClick: function(){\n                self.isDragging(true);\n            },\n            onDrag: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                animateAllCards(elementChildren, draggableIndex);\n                self.isDragging(true);\n            },\n            onThrowUpdate: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                animateAllCards(elementChildren, draggableIndex);\n                self.isDragging(true);\n            },\n            onThrowComplete: function(){\n                bindingValue(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n                callBack(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n                self.isDragging(false);\n            }\n        });\n\n        //Push all draggables to an array so that we can access them later.\n        self.allDraggables.push(newDraggable);\n    };\n\n\n    /*\n     *\n     * Showing and Hiding options drawer\n     *\n     */\n\n    // Function to show or hide the selected-options-drawer\n    self.showHideOptionsDrawer = function(){\n        self.showSelectedProductsDrawer(!self.showSelectedProductsDrawer());\n    };\n\n    /*\n     *\n     * adding and remove products with rates\n     *\n     */\n\n    // Add product with rate\n    self.addProductWithRate = function(data){\n\n        // First set our product isSelected observable to true\n        self.productsWithDetails()[self.activeProductIndex()].isSelected(true);\n\n        // Then loop through all of its rates and set all to false...\n        var rates = self.productsWithDetails()[self.activeProductIndex()].productDetails.Rates[0].RatedTerms;\n        $.each(rates, function(index){\n            rates[index].isSelected(false);\n        });\n        // Finally set the rate at the activeRateIndex to true\n        rates[self.activeRateIndex()].isSelected(true);\n        // And updated our Aside observables\n        self.generatePlanCostAndProductCount();\n    };\n\n    // Remove product with rate\n    self.removeProductWithRate = function(index, data){\n        // First set our product isSelected observable to false\n        self.productsWithDetails()[index()].isSelected(false);\n\n        // Then loop through all of its rates and set all to false...\n        var rates = self.productsWithDetails()[index()].productDetails.Rates[0].RatedTerms;\n        $.each(rates, function(index){\n            rates[index].isSelected(false);\n        });\n        // And updated our Aside observables\n        self.generatePlanCostAndProductCount();\n    };\n\n    // Keydown event listener which handles different key events\n    self.listenForKeyDown = function(){\n        $( \"#commerceProductApp\" ).keydown(function(event) {\n\n            switch ( event.which ){\n\n                // If user taps tab, we focus on next input\n                case 9:\n                    event.preventDefault();\n                    self.incrementInputIndex( self.formData[self.activeInputIndex()] );\n                    break;\n            }\n        });\n    };\n\n\n    /*\n     *\n     * Aside observables calculator\n     *\n     */\n\n    self.generatePlanCostAndProductCount = function(){\n        var totalPlanCost = 0;\n        var productsCount = 0;\n        $.each(self.productsWithDetails(), function(index){\n            if(self.productsWithDetails()[index].isSelected()){\n                productsCount ++;\n                $.each(self.productsWithDetails()[index].productDetails.Rates[0].RatedTerms, function(i){\n                    if(self.productsWithDetails()[index].productDetails.Rates[0].RatedTerms[i].isSelected()){\n                        totalPlanCost += self.productsWithDetails()[index].productDetails.Rates[0].RatedTerms[i].DealerCost;\n                    }\n                });\n            }\n        });\n        self.planCost(totalPlanCost);\n        self.productCount(productsCount);\n    };\n\n\n    /*\n     *\n     * Initialize the project\n     *\n     */\n\n    // This function bootstraps our page\n    self.init = function(){\n        // Set the top offset of our active area based on the self.defaultIndex;\n        $('.active-card-frame').css({ top: self.defaultIndex * self.cardHeight + 'px' });\n        // Add keydown event listeners to our app\n        self.listenForKeyDown();\n        // Animate the martinTop of our inputs container\n        self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n    };\n\n    // Inits the app once the document is ready\n    $(document).ready(function(){\n        self.init();\n    });\n\n\n\n\n    /*\n     *\n     * Return our revealing module\n     *\n     */\n\n    return {\n        // Input array\n        activeInputIndex: self.activeInputIndex,\n        inputMarginTop: self.inputMarginTop,\n        incrementInputIndex: self.incrementInputIndex,\n        decrementInputIndex: self.decrementInputIndex,\n        getQuote: self.getQuote,\n        vehicleDetails: self.vehicleDetails,\n        formData: self.formData,\n\n        // Products array\n        isSearchingByPrice: self.isSearchingByPrice,\n        productsWithDetails: self.productsWithDetails,\n        activeProductIndex: self.activeProductIndex,\n        activeProductRates: self.activeProductRates,\n        isDragging: self.isDragging,\n\n        // Aside vars\n        planCost: self.planCost,\n        monthlyCost: self.monthlyCost,\n        productCount: self.productCount,\n        loanTerm: self.loanTerm,\n        showHideOptionsDrawer: self.showHideOptionsDrawer,\n        showSelectedProductsDrawer :self.showSelectedProductsDrawer,\n        addProductWithRate: self.addProductWithRate,\n        removeProductWithRate: self.removeProductWithRate,\n        activeCoverage: self.activeCoverage,\n        activeDeductible: self.activeDeductible\n\n    };\n}\n\n// Activates knockout.js\nko.applyBindings(new AppViewModel(), document.getElementById('commerceProductApp'));\n\n// uat\n// easycareuat\n// U@Testing123\n// APCO-02\n// 4T1BF1FK7GU566533"]}