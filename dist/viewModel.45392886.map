{"version":3,"sources":["js/config.js","js/fetchData.js","js/viewModel.js"],"names":["module","exports","products","url","authToken","tempBodyData","dateOfSale","dealerAccountCode","makeModelInfo","partnerSpecificEligibility","productPlanType","providerCode","vehicleCertification","vehicleIdentificationNumber","vehicleInservice","vehicleOdometer","vehicleUsageTypes","quoteSessionNumber","productCodeFilters","rates","postmanToken","key","value","cacheControl","eligibilitySessionID","productsToRate","PartnerSpecificFields","FlexFields","FieldName","FieldType","FieldValue","ApplicationCode","BaseNoUpgradeProduct","CertificationType","DisplayName","InternalProductId","InternalProductVersionId","InternalRatingProgramId","IsDealerException","IsInserviceRequired","IsNewCoverage","IsVehicleFinancialsRequired","IsWrapCoverage","ParentProductType","ApplicationSubCode","InternalProductTypeId","ParentProductRatingCategory","Abbreviation","PartnerCode","ProfitSettingCategoryName","SettingDependentSubCode","UpgradesInternalProductTypeId","ProductCoverages","CoverageDeductibles","ProductDeductible","InternalDeductibleId","NumericValue","ProductCoverage","Description","InternalCoverageId","IsLWBaseCoverage","ProductTerms","ProductOptions","RateCalculationMethod","SortOrder","UpgradeProducts","vehicleFinancials","AmountFinanced","DMSDealNumber","DaysToFirstPayment","FinancedAPR","FinancedTermMonths","FirstPaymentDate","LenderAddress1","LenderAddress2","LenderCity","LenderCode","LenderEmail","LenderName","LenderPhone","LenderState","LenderZip","MSRP","MoneyFactor","PurchasePrice","StockNumber","VehicleSaleType","vehicleToRate","InternalMakeId","InternalModelId","MakeName","ModelName","ModelYear","VehicleIdentification","getProducts","path","method","contentType","authorization","bodyData","Promise","resolve","reject","fetch","headers","body","JSON","stringify","then","res","json","data","getRatesForProduct","productId","config","require","dataService","AppViewModel","self","defaultIndex","cardHeight","duration","loanTerm","ko","observable","displayDataType","isDragging","allDraggables","productsWithDetails","observableArray","activeProductIndex","activeProductRates","activeRateIndex","activeInputIndex","activeCoverage","activeDeductible","vehicleDetails","planCost","productCount","planCount","selectedProductCount","monthlyCost","computed","toFixed","searchVinView","errorMessage","pageBusy","showSelectedProductsDrawer","handleProductsWrapperDragged","returnedValue","pop","Rates","makeCardsDraggable","$","columnData","domElement","callback","bindingValue","elementChildrenCount","length","draggableElement","offsetDifference","TweenMax","to","y","console","log","handleCostWrapperDragged","handleInputFilledOut","inputMarginTop","incrementInputIndex","index","formData","isCurrent","decrementInputIndex","inputValue","displayName","isRequired","type","callBack","loadVehicleDetails","isComplete","getProductsForVin","VIN","tempVIN","vehicleApi","ajax","success","result","Results","async","Products","each","isSelected","RatedTerms","i","push","elementChildren","children","css","height","snapArray","Array","generateDraggableIndex","value01","value02","Math","abs","round","animateAllCards","addClass","opacity","removeClass","transform","newDraggable","Draggable","create","edgeResistance","throwProps","snap","zIndexBoost","maxDuration","onClick","onDrag","draggableIndex","onThrowUpdate","onThrowComplete","endY","showHideOptionsDrawer","addProductWithRate","generatePlanCostAndProductCount","removeProductWithRate","backToSearch","listenForKeyDown","setValueType","keydown","event","which","preventDefault","totalPlanCost","productsCount","DealerCost","init","top","document","ready","applyBindings","getElementById"],"mappings":"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","file":"viewModel.45392886.map","sourceRoot":"..","sourcesContent":["module.exports = {\n    products: {\n        url: 'https://tlcsvcapi.uat.taillight.xyz/RSS.SPAN.BusinessServices/restvehicleproductsvc.svc/RetrieveVehicleProductsByVIN',\n        authToken: 'eyJ0eXAiOiJVU0VSQUNDT1VOVCIsImFsZyI6Mn0.eyJqdGkiOiI5OTZlMmE0MC1hODVmLTQ2YzktYTQ0ZS1kNjU4NGJjYjAyMjQiLCJzdWIiOiI1NjIwZmQxZmMyNTcxNzFmZWMxOWYzMjY7ZWFzeWNhcmVhZG1pbjs1NjE2YTU5ZDQ5M2ZiNzFiZGMxNDkyYTUiLCJhdWQiOiJyaXN0a2VuLmNvbSIsIm5iZiI6IjE1MjAzNjk5NDgiLCJleHAiOiIxNTIwNDU2MzQ4IiwiQ2xhaW1zIjpbeyJLZXkiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiLCJWYWx1ZSI6IlNQQU4gQURNSU4ifV19.okOG2OGJCmCDkOU1l3kRdCGnnsNqaAGrJyS4VN7YBH4=',\n        tempBodyData: {\n            dateOfSale: '2018-03-06',\n            dealerAccountCode: '014996',\n            makeModelInfo: null,\n            partnerSpecificEligibility: [{\"key\": \"dealSaleType\", \"value\": \"RetailFinanced\"}],\n            productPlanType: null,\n            providerCode: 'EASYCARE',\n            vehicleCertification: 'None',\n            vehicleIdentificationNumber: '1FT7W2B69GEA00053',\n            vehicleInservice: null,\n            vehicleOdometer: '1000',\n            vehicleUsageTypes: ['Personal'],\n            quoteSessionNumber: '94763b6d-5429-4c2f-9876-55a46821b9e7',\n            productCodeFilters: null\n        }\n    },\n    rates: {\n        url: 'https://tlcsvcapi.uat.taillight.xyz/rss.span.businessservices/restvehicleratesvc.svc/RetrieveVehicleRates',\n        authToken: 'eyJ0eXAiOiJVU0VSQUNDT1VOVCIsImFsZyI6Mn0.eyJqdGkiOiJlNTE4Njk2MC1lYzc2LTRkZjctOTY2YS1iMDY5Y2E0ODY1ZDUiLCJzdWIiOiI1NjIwZmQxZmMyNTcxNzFmZWMxOWYzMjY7ZWFzeWNhcmVhZG1pbjs1NjE2YTU5ZDQ5M2ZiNzFiZGMxNDkyYTUiLCJhdWQiOiJyaXN0a2VuLmNvbSIsIm5iZiI6IjE1MjY2NjYxOTIiLCJleHAiOiIxNTI2NzUyNTkyIiwiQ2xhaW1zIjpbeyJLZXkiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiLCJWYWx1ZSI6IlNQQU4gQURNSU4ifSx7IktleSI6Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSIsIlZhbHVlIjoiUE9SVEFMIEFETUlOIn1dfQ.19WgLXhzHgX6rPiQjRktGRNFZeW6xre71NtN0VJVZgs=',\n        postmanToken: {\n            key: 'Postman-Token',\n            value: 'a9834658-8490-07c0-6f58-ca47bbcb5474'\n        },\n        cacheControl: {\n            key: 'Cache-Control',\n            value: 'no-cache'\n        },\n\n\n        tempBodyData: {\n            dateOfSale: '2018-05-18',\n                dealerAccountCode: '014996',\n            eligibilitySessionID: null,\n            partnerSpecificEligibility: [],\n            productPlanType: null,\n            productsToRate: [\n            {\n                PartnerSpecificFields: {\n                    FlexFields: [\n                        {\n                            FieldName: 'SORTORDER',\n                            FieldType: 2,\n                            FieldValue: '2'\n                        }\n                    ]\n                },\n                ApplicationCode: 'C1032605',\n                BaseNoUpgradeProduct: null,\n                CertificationType: 0,\n                DisplayName: 'EC Select Plus 6 StandAlone 2014 (US):2605',\n                InternalProductId: 'C1032605',\n                InternalProductVersionId: null,\n                InternalRatingProgramId: null,\n                IsDealerException: false,\n                IsInserviceRequired: false,\n                IsNewCoverage: false,\n                IsVehicleFinancialsRequired: false,\n                IsWrapCoverage: false,\n                ParentProductType: {\n                    PartnerSpecificFields: {\n                        FlexFields: []\n                    },\n                    ApplicationCode: 'ECSP',\n                    ApplicationSubCode: null,\n                    DisplayName: null,\n                    InternalProductTypeId: null,\n                    ParentProductRatingCategory: {\n                        PartnerSpecificFields: {\n                            FlexFields: [\n                                {\n                                    FieldName: 'COMMERCE-RATE-TYPE',\n                                    FieldType: 2,\n                                    FieldValue: 'ECSP'\n                                }\n                            ]\n                        },\n                        Abbreviation: 'ECSP',\n                        ApplicationCode: 'ECSP',\n                        DisplayName: null\n                    },\n                    PartnerCode: 'ECSP',\n                    ProfitSettingCategoryName: null,\n                    SettingDependentSubCode: null,\n                    UpgradesInternalProductTypeId: null\n                },\n                PartnerCode: 'C1032605',\n                ProductCoverages: [\n                    {\n                        CoverageDeductibles: [\n                            {\n                                ProductDeductible: {\n                                    PartnerSpecificFields: {\n                                        FlexFields: []\n                                    },\n                                    Abbreviation: '000',\n                                    DisplayName: '0.00',\n                                    InternalDeductibleId: '0.00',\n                                    NumericValue: 0,\n                                    PartnerCode: '0.00'\n                                }\n                            }\n                        ],\n                        ProductCoverage: {\n                            PartnerSpecificFields: {\n                                FlexFields: []\n                            },\n                            Abbreviation: 'T.SelectPlus',\n                            Description: 'SelectPlus Time only',\n                            DisplayName: 'SelectPlus: Time only',\n                            InternalCoverageId: 'T.SelectPlus',\n                            IsLWBaseCoverage: false,\n                            NumericValue: 0,\n                            PartnerCode: 'T.SelectPlus'\n                        },\n                        ProductTerms: null\n                    }\n                ],\n                ProductOptions: [],\n                RateCalculationMethod: 0,\n                SortOrder: '2',\n                UpgradeProducts: null\n            }\n        ],\n            providerCode: 'EASYCARE',\n            vehicleCertification: 'None',\n            vehicleFinancials: {\n            AmountFinanced: 0,\n                DMSDealNumber: '',\n                DaysToFirstPayment: 0,\n                FinancedAPR: 0,\n                FinancedTermMonths: 0,\n                FirstPaymentDate: '',\n                LenderAddress1: null,\n                LenderAddress2: null,\n                LenderCity: null,\n                LenderCode: null,\n                LenderEmail: null,\n                LenderName: null,\n                LenderPhone: null,\n                LenderState: null,\n                LenderZip: null,\n                MSRP: 0,\n                MoneyFactor: 0,\n                PurchasePrice: 0,\n                StockNumber: '',\n                VehicleSaleType: 'RetailFinanced'\n        },\n            vehicleInservice: null,\n                vehicleOdometer: '2500',\n            vehicleToRate: {\n            InternalMakeId: 'FORD',\n                InternalModelId: '1FT7W2B69G',\n                MakeName: '',\n                ModelName: null,\n                ModelYear: 2016,\n                VehicleIdentification: '1FT7W2B69GEA00053'\n        },\n            vehicleUsageTypes: [\n                'Personal'\n            ],\n                quoteSessionNumber: 'd219be83-c5d8-4fcd-9dc7-f0c36c8fa409'\n        }\n    }\n};\n\n\n\n","module.exports = {\n    getProducts: function(path, method, contentType, authorization, bodyData){\n        // console.log(bodyData.vehicleIdentificationNumber);\n        return new Promise((resolve, reject) => {\n            fetch(path, {\n                headers: {\n                    'content-type': contentType,\n                    'Authorization': authorization\n                },\n                body: JSON.stringify(bodyData),\n                method: method,\n\n            })\n                .then(res => res.json())\n                .then((data) => {\n                    resolve(data);\n                })\n        });\n    },\n    getRatesForProduct: function(path, method, contentType, authorization, cacheControl, postmanToken, bodyData, productId){\n        // console.log('getRatesForProduct called with id ' + productId);\n        return new Promise((resolve, reject) => {\n            fetch(path, {\n                    headers: {\n                        'content-type': contentType,\n                        'Authorization': authorization,\n                        'Cache-Control': cacheControl,\n                        // 'Postman-Token': postmanToken\n                    },\n                    body: JSON.stringify(bodyData),\n                    method: method\n                })\n                .then(res => res.json())\n                .then((data) =>{\n                    resolve(data);\n                });\n        });\n    }\n};","const config = require('./config.js');\nconst dataService = require('./fetchData.js');\n\nfunction AppViewModel() {\n\n    var self = this;\n\n    // The starting position of the app - This sets how many 'cards' from the top the 'focus' section is plus a 'cardHeight' in Pixels\n    self.defaultIndex = 2;\n    self.cardHeight = 180;\n\n    // Local variable for our animation duration\n    var duration = 0.25;\n\n    // Temp Loan term var\n    self.loanTerm = ko.observable(48);\n\n    // Boolean value that decides if the user is searching by price, or by term and miles\n    self.displayDataType = ko.observable('Price');\n\n    // Boolean to stop certain user events if draggable or throw is happening\n    self.isDragging = ko.observable(false);\n\n    //Array that we use to store our draggables in so that we can garbage collect later\n    self.allDraggables = [];\n\n    // This array is our main source of Data for the app\n    self.productsWithDetails = ko.observableArray();\n\n    // Vars for setting the indexes\n    self.activeProductIndex = ko.observable(self.defaultIndex);\n    self.activeProductRates = ko.observableArray();\n    self.activeRateIndex = ko.observable(self.defaultIndex);\n    self.activeInputIndex = ko.observable(0);\n\n    // Vars for display Coverages and Deductibles and other information\n    self.activeCoverage = ko.observable();\n    self.activeDeductible = ko.observable();\n\n    self.vehicleDetails = ko.observable();\n\n    self.planCost = ko.observable(0);\n    self.productCount = ko.observable(0);\n    self.planCount = ko.observable(0);\n    self.selectedProductCount = ko.observable(0);\n    self.monthlyCost = ko.computed(function(){\n        return (self.planCost() / self.loanTerm()).toFixed(2)\n    });\n\n    // Error message and busy page vars\n    self.searchVinView = ko.observable(true);\n    self.errorMessage = ko.observable('');\n    self.pageBusy = ko.observable(false);\n    self.showSelectedProductsDrawer = ko.observable(false);\n    /*\n     *\n     *  Event handler callbacks that get triggered once a column on the UI completes its 'drag'\n     *\n     */\n    // Handle completion of products dragged\n    self.handleProductsWrapperDragged = function(returnedValue){\n\n        //Remove our original 'costs' draggable from the DOM, as its contents will have changed. Create a new one\n        self.allDraggables.pop();\n\n        // Update our activeProductRates Array with our new rates\n        self.activeProductRates(self.productsWithDetails()[self.activeProductIndex()].Rates);\n\n        // And create a new draggable based on the updated contents of the dom element\n        self.makeCardsDraggable($(self.columnData[1].domElement), self.columnData[1].callback, self.columnData[1].bindingValue);\n\n        // And update our coverage and deductible vars\n        // self.activeCoverage(self.productsWithDetails()[self.activeProductIndex()].Rates[0].RatedCoverage.DisplayName);\n        // self.activeDeductible(self.productsWithDetails()[self.activeProductIndex()].Rates[0].RatedDeductible.DisplayName);\n\n        // Get the length of our updated list of rates\n        var elementChildrenCount = self.activeProductRates().length,\n            draggableElement = $(self.columnData[1].domElement);\n\n        self.planCount(elementChildrenCount);\n\n        //If our rates list is less than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n\n            var offsetDifference = (self.defaultIndex) - elementChildrenCount;\n            TweenMax.to(draggableElement, duration, {\n                y: (offsetDifference + 1) * self.cardHeight,\n            });\n        } else {\n            TweenMax.to(draggableElement, duration, {\n                y: 0\n            });\n        }\n\n        console.log(self.activeProductRates());\n    };\n\n    self.handleCostWrapperDragged = function(returnedValue){\n        //Set our activeCost Index\n        self.activeRateIndex(returnedValue);\n    };\n\n    self.handleInputFilledOut = function(){\n        console.log('One input filled out');\n    };\n\n    self.inputMarginTop = ko.observable(0);\n\n    self.incrementInputIndex = function(data){\n        if( data.index < self.formData.length -1 ) {\n            data.isCurrent(false);\n            self.formData[data.index + 1].isCurrent(true)\n            self.activeInputIndex(data.index + 1);\n            self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        }\n        return\n    };\n\n    self.decrementInputIndex = function(data){\n        if( data.index > 0 ) {\n            data.isCurrent(false);\n            self.formData[data.index - 1].isCurrent(true);\n            self.activeInputIndex(data.index - 1);\n            self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        }\n        return\n    };\n\n    /*\n     *\n     * UI Draggable\n     *\n     */\n\n    // Each object in this array represents a column in our draggable UI - Included are the dom element to be selected, a reference to a callback and the KO observable that it updates.\n    self.columnData = [\n        {\n            index: 0,\n            domElement: '.products-wrapper',\n            callback: self.handleProductsWrapperDragged,\n            bindingValue: self.activeProductIndex\n        },\n        {\n            index: 1,\n            domElement: '.cost-wrapper',\n            callback: self.handleCostWrapperDragged,\n            bindingValue: self.activeRateIndex\n        }\n    ];\n\n    self.formData = [\n        {\n            index: 0,\n            inputValue: \"vehicleVin\",\n            displayName: \"VIN Number\",\n            isRequired: true,\n            type: \"text\",\n            callBack: function(){\n                self.loadVehicleDetails(this.value());\n            },\n            value: ko.observable(),\n            isCurrent: ko.observable(true),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 1,\n            inputValue: \"purchasePrice\",\n            displayName: \"Purchase Price\",\n            isRequired: true,\n            type: \"text\",\n            callBack: false,\n            value: ko.observable(),\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 2,\n            inputValue: \"purchaseDate\",\n            displayName: \"Purchase Date\",\n            isRequired: true,\n            type: \"text\",\n            callBack: false,\n            value: ko.observable(),\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 3,\n            inputValue: \"submit\",\n            displayName: \"\",\n            isRequired: true,\n            type: \"button\",\n            callBack: function(){\n                self.getProductsForVin(self.formData[0].value());\n            },\n            value: null,\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        }\n    ];\n\n\n    /*\n    *\n    * Data retrieval and object creation functions\n    *\n    */\n\n    //Retrieve the vehicle details from the VIN\n    self.loadVehicleDetails = function(VIN){\n\n        console.log(VIN);\n\n        var tempVIN = '3VW2K7AJ0FM30377';\n\n        if(VIN) {\n            var vehicleApi = 'https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVin/' + VIN + '?format=json';\n\n            $.ajax({url: vehicleApi,\n                success: function(result){\n                    self.vehicleDetails(result.Results);\n                },\n                async: true});\n\n            // console.log(self.vehicleDetails());\n        }\n    };\n\n    // Gets all products for our VIN\n    self.getProductsForVin = function(VIN){\n\n        // Set our pageBusy UI Var\n        self.pageBusy(true);\n\n        // Empty our product object first\n        self.productsWithDetails([]);\n\n        // Define the values we need to get products for our vin\n        const path = config.products.url;\n        const method = 'POST';\n        const contentType = 'application/json';\n        const authorization = config.products.authToken;\n        const bodyData = config.products.tempBodyData;\n\n        // If we have a VIN from the UI, use this one instead - mock data object has a hard-coded vin as a fallback\n        if(VIN){\n            bodyData.vehicleIdentificationNumber = VIN;\n        }\n\n        // Make a call to our getProducts method\n        dataService.getProducts(path, method, contentType, authorization, bodyData)\n            .then(function(data){\n\n                console.log(data.Products.length);\n\n                self.productCount(data.Products.length);\n\n                $.each(data.Products, (index)=>{\n\n                    data.Products[index].isSelected = ko.observable(false);\n                    data.Products[index].Rates = [];\n\n                    // Define the values we need to get rates for our products\n                    const path = config.rates.url;\n                    const method = 'POST';\n                    const contentType = 'application/json';\n                    const authorization = config.rates.authToken;\n                    const bodyData = config.rates.tempBodyData;\n\n                    bodyData.productsToRate[0].InternalProductId = data.Products[index].InternalProductId;\n                    bodyData.productsToRate[0].ApplicationCode = data.Products[index].InternalProductId;\n\n                    const cacheControl = 'no-cache';\n                    const postmanToken = 'a9834658-8490-07c0-6f58-ca47bbcb5474';\n\n                    // Call our getRatesForProduct method once for each product\n                    dataService.getRatesForProduct(path, method, contentType, authorization, cacheControl, postmanToken, bodyData, data.Products[index].InternalProductId)\n                        .then(function(rates){\n                            //console.log(rates);\n                            // Add an isSelected observable to each of our rates\n                            $.each(rates.Rates[0].RatedTerms, function(i){\n                                rates.Rates[0].RatedTerms[i].isSelected = ko.observable(false);\n                                data.Products[index].Rates.push(rates.Rates[0].RatedTerms[i]);\n                            });\n                        }).then(function(){\n                        // Update our activeProductRates Array with our new rates\n                        self.activeProductRates(self.productsWithDetails()[self.activeProductIndex()].Rates);\n\n                        // Update our planCount var\n                        self.planCount(self.productsWithDetails()[self.activeProductIndex()].Rates.length);\n\n                        // Make our cards draggable\n                        $.each(self.columnData, function(index){\n                            self.makeCardsDraggable($(self.columnData[index].domElement), self.columnData[index].callback, self.columnData[index].bindingValue);\n                        });\n\n                        // Turn off our pageBusy var\n                        self.pageBusy(false);\n                    });\n\n                    // Update our observable array with the data\n                    self.productsWithDetails.push(data.Products[index]);\n                });\n\n                console.log(self.productsWithDetails());\n\n            });\n\n        console.log(self.productsWithDetails());\n\n        // Animated our views so that we go to scroll view.\n        self.searchVinView(false);\n    };\n\n\n    //Makes the selected elements on the DOM draggable\n    self.makeCardsDraggable = function(draggableElement, callBack, bindingValue){\n\n        // Make our draggable columns draggable\n        var elementChildren = $(draggableElement).children(),\n            elementChildrenCount = $(elementChildren).length;\n\n        // Set all our cards height to the self.cardHeight variable\n        $(elementChildren).css({ height: self.cardHeight + 'px'});\n        // Also set the height of our active-card-frame\n        $('.active-card-frame').css({ height: self.cardHeight + 'px'});\n\n        // Generate a list of snap values\n        var snapArray = new Array();\n        for(var i = -self.defaultIndex; i < elementChildrenCount - self.defaultIndex; i++){\n            snapArray.push( -(i * self.cardHeight));\n        }\n\n        //If our rates list is less than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n\n            var offsetDifference = (self.defaultIndex) - elementChildrenCount;\n            TweenMax.to(draggableElement, duration, {\n                y: (offsetDifference + 1) * self.cardHeight\n            });\n        } else {\n            TweenMax.to(draggableElement, duration, {\n                y: 0\n            });\n        }\n\n        // Function to return the index of the card that is in the 'active-card-frame'\n        var generateDraggableIndex = function(value01, value02){\n            return Math.abs(Math.round((value01/value02)) - self.defaultIndex);\n        };\n\n        // Set the default binding values for the cards\n        if( elementChildrenCount == 1){\n            bindingValue(0);\n        } else if ( elementChildrenCount == 2 ) {\n            bindingValue(1);\n        } else {\n            bindingValue(self.defaultIndex);\n        }\n\n        var animateAllCards = function(children, index){\n\n            $.each(children, function(i){\n\n                if( i === index ){\n                    $(elementChildren[i]).children().addClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 0\n                        // transform: 'scale3d(1, 1, 1)'\n                    });\n                } else if (i === index - 1 || i === index + 1){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.95, 1, 1)'\n                    });\n                } else if (i === index - 2 || i === index + 2){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.9, 1, 1)'\n                    });\n                } else if (i === index - 3 || i === index + 3){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.85, 1, 1)'\n                    });\n                } else if (i === index - 4 || i === index + 4){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.8, 1, 1)'\n                    });\n                } else if (i < index - 4 || i > index + 4) {\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                    });\n                } else {\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0\n                    });\n                }\n\n            });\n        };\n\n\n        // Call our animated card methods for the first time...\n        animateAllCards(elementChildren, self.defaultIndex);\n\n        // However, if the total number of children is less than our defaultIndex (2) the first one in the array needs to be set as 'active'\n        if( elementChildrenCount <= self.defaultIndex ){\n            if( elementChildrenCount == 1 || elementChildrenCount ==  self.defaultIndex ){\n                $(elementChildren[0]).children('.card-content').addClass('active-product');\n                TweenMax.to($(elementChildren[0]).children('.card-content'), duration, {\n                    opacity: 1,\n                    transform: 'scale3d(1, 1, 1)'\n                });\n            }\n        }\n\n        //Create the draggable element and assign it a var\n        var newDraggable = Draggable.create(draggableElement, {\n            type: \"y\",\n            edgeResistance: 0.95,\n            throwProps:true,\n            snap: snapArray,\n            zIndexBoost: false,\n            maxDuration: duration,\n            onClick: function(){\n                self.isDragging(true);\n            },\n            onDrag: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                animateAllCards(elementChildren, draggableIndex);\n                self.isDragging(true);\n            },\n            onThrowUpdate: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                animateAllCards(elementChildren, draggableIndex);\n                self.isDragging(true);\n            },\n            onThrowComplete: function(){\n                bindingValue(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n                callBack(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n                self.isDragging(false);\n            }\n        });\n\n        //Push all draggables to an array so that we can access them later.\n        self.allDraggables.push(newDraggable);\n    };\n\n\n    /*\n     *\n     * Showing and Hiding options drawer\n     *\n     */\n\n    // Function to show or hide the selected-options-drawer\n    self.showHideOptionsDrawer = function(){\n        self.showSelectedProductsDrawer(!self.showSelectedProductsDrawer());\n    };\n\n    /*\n     *\n     * adding and remove products with rates\n     *\n     */\n\n    // Add product with rate\n    self.addProductWithRate = function(data){\n\n        // First set our product isSelected observable to true\n        self.productsWithDetails()[self.activeProductIndex()].isSelected(true);\n\n        // Then loop through all of its rates and set all to false...\n        var rates = self.productsWithDetails()[self.activeProductIndex()].Rates;\n        $.each(rates, function(index){\n            rates[index].isSelected(false);\n        });\n        // Finally set the rate at the activeRateIndex to true\n        rates[self.activeRateIndex()].isSelected(true);\n        // And updated our Aside observables\n        self.generatePlanCostAndProductCount();\n    };\n\n    // Remove product with rate\n    self.removeProductWithRate = function(index, data){\n        // First set our product isSelected observable to false\n        self.productsWithDetails()[index()].isSelected(false);\n\n        // Then loop through all of its rates and set all to false...\n        var rates = self.productsWithDetails()[index()].Rates;\n        $.each(rates, function(index){\n            rates[index].isSelected(false);\n        });\n        // And updated our Aside observables\n        self.generatePlanCostAndProductCount();\n    };\n\n    // Handle going back to search page view\n    self.backToSearch = function(){\n        // Toggle our Views\n        self.searchVinView(true);\n        // Animate the martinTop of our inputs container\n        $.each(self.formData, function(index){\n            self.formData[index].isCurrent(false);\n            if(index === 0){\n                self.formData[index].isCurrent(true);\n            }\n        });\n        self.inputMarginTop(self.defaultIndex * self.cardHeight );\n        // And re-add our event listener to the 'tab' keydown\n        self.listenForKeyDown();\n    };\n\n    // Decide what type of sorting the user wants to use\n    self.setValueType = function(data){\n        self.displayDataType(data);\n    };\n\n    // Keydown event listener which handles different key events\n    self.listenForKeyDown = function(){\n        $( \"#commerceProductApp\" ).keydown(function(event) {\n\n            switch ( event.which ){\n\n                // If user taps tab, we focus on next input\n                case 9:\n                    event.preventDefault();\n                    self.incrementInputIndex( self.formData[self.activeInputIndex()] );\n                    break;\n\n                // If the users taps 'enter' and we are in the searchVinView and on the last input (submit button) call the function that loads products\n                case 13:\n                    if( self.searchVinView() && self.activeInputIndex() === (self.formData.length - 1) ){\n                        event.preventDefault();\n                        self.getProductsForVin(self.formData[0].value());\n                    }\n                    break;\n\n            }\n        });\n    };\n\n\n    /*\n     *\n     * Aside observables calculator\n     *\n     */\n\n    self.generatePlanCostAndProductCount = function(){\n        var totalPlanCost = 0;\n        var productsCount = 0;\n        $.each(self.productsWithDetails(), function(index){\n            if(self.productsWithDetails()[index].isSelected()){\n                productsCount ++;\n                $.each(self.productsWithDetails()[index].Rates, function(i){\n                    if(self.productsWithDetails()[index].Rates[i].isSelected()){\n                        totalPlanCost += self.productsWithDetails()[index].Rates[i].DealerCost;\n                    }\n                });\n            }\n        });\n        self.planCost(totalPlanCost);\n        self.selectedProductCount(productsCount);\n    };\n\n\n    /*\n     *\n     * Initialize the project\n     *\n     */\n\n    // This function bootstraps our page\n    self.init = function(){\n        // Set the top offset of our active area based on the self.defaultIndex;\n        $('.active-card-frame').css({ top: self.defaultIndex * self.cardHeight + 'px' });\n        // Set the top of our button\n        $('.add-product').css({ top: ((self.defaultIndex * self.cardHeight) + self.cardHeight/2) - 32 + 'px' });\n        // Set the top of the my-plan div\n        $('.my-plan').css({ top: ((self.defaultIndex + 1 ) * self.cardHeight) + 'px' });\n        // Add keydown event listeners to our app\n        self.listenForKeyDown();\n        // Animate the martinTop of our inputs container\n        self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        // Focus on the first input in our input list\n\n    };\n\n    // Inits the app once the document is ready\n    $(document).ready(function(){\n        self.init();\n    });\n\n\n\n\n    /*\n     *\n     * Return our revealing module\n     *\n     */\n\n    return {\n        //App vars\n        searchVinView: self.searchVinView,\n        errorMessage: self.errorMessage,\n        pageBusy: self.pageBusy,\n        cardHeight: self.cardHeight,\n\n        // Input array\n        activeInputIndex: self.activeInputIndex,\n        inputMarginTop: self.inputMarginTop,\n        incrementInputIndex: self.incrementInputIndex,\n        decrementInputIndex: self.decrementInputIndex,\n        vehicleDetails: self.vehicleDetails,\n        formData: self.formData,\n\n        // Products array\n        productsWithDetails: self.productsWithDetails,\n        activeProductIndex: self.activeProductIndex,\n        activeRateIndex: self.activeRateIndex,\n        activeProductRates: self.activeProductRates,\n        isDragging: self.isDragging,\n        backToSearch: self.backToSearch,\n\n        // Aside and UI vars\n        displayDataType: self.displayDataType,\n        planCost: self.planCost,\n        monthlyCost: self.monthlyCost,\n        selectedProductCount: self.selectedProductCount,\n        productCount: self.productCount,\n        planCount: self.planCount,\n        loanTerm: self.loanTerm,\n        setValueType: self.setValueType,\n        showHideOptionsDrawer: self.showHideOptionsDrawer,\n        showSelectedProductsDrawer :self.showSelectedProductsDrawer,\n        addProductWithRate: self.addProductWithRate,\n        removeProductWithRate: self.removeProductWithRate,\n        activeCoverage: self.activeCoverage,\n        activeDeductible: self.activeDeductible\n\n    };\n}\n\n// Activates knockout.js\nko.applyBindings(new AppViewModel(), document.getElementById('commerceProductApp'));\n\n// uat\n// easycareuat\n// U@Testing123\n// APCO-02\n// 4T1BF1FK7GU566533"]}