{"version":3,"sources":["js/config_1.js","js/fetchData.js","js/viewModel.js"],"names":["module","exports","products","url","authToken","tempBodyData","dateOfSale","dealerAccountCode","makeModelInfo","partnerSpecificEligibility","productPlanType","providerCode","vehicleCertification","vehicleIdentificationNumber","vehicleInservice","vehicleOdometer","vehicleUsageTypes","quoteSessionNumber","productCodeFilters","rates","postmanToken","key","value","cacheControl","eligibilitySessionID","productsToRate","PartnerSpecificFields","FlexFields","FieldName","FieldType","FieldValue","ApplicationCode","BaseNoUpgradeProduct","CertificationType","DisplayName","InternalProductId","InternalProductVersionId","InternalRatingProgramId","IsDealerException","IsInserviceRequired","IsNewCoverage","IsVehicleFinancialsRequired","IsWrapCoverage","ParentProductType","ApplicationSubCode","InternalProductTypeId","ParentProductRatingCategory","Abbreviation","PartnerCode","ProfitSettingCategoryName","SettingDependentSubCode","UpgradesInternalProductTypeId","ProductCoverages","CoverageDeductibles","ProductDeductible","InternalDeductibleId","NumericValue","ProductCoverage","Description","InternalCoverageId","IsLWBaseCoverage","ProductTerms","ProductOptions","RateCalculationMethod","SortOrder","UpgradeProducts","vehicleFinancials","AmountFinanced","DMSDealNumber","DaysToFirstPayment","FinancedAPR","FinancedTermMonths","FirstPaymentDate","LenderAddress1","LenderAddress2","LenderCity","LenderCode","LenderEmail","LenderName","LenderPhone","LenderState","LenderZip","MSRP","MoneyFactor","PurchasePrice","StockNumber","VehicleSaleType","vehicleToRate","InternalMakeId","InternalModelId","MakeName","ModelName","ModelYear","VehicleIdentification","getProducts","path","method","contentType","authorization","bodyData","Promise","resolve","reject","fetch","headers","body","JSON","stringify","then","res","json","data","getRatesForProduct","productId","config","require","dataService","AppViewModel","self","defaultIndex","cardHeight","inputMarginTop","ko","observable","duration","loanTerm","displayDataType","isDragging","allDraggables","productsWithDetails","observableArray","activeProductRates","activeProductTerms","activeProductMiles","activeProductIndex","activeRateIndex","activeTermIndex","activeMilesIndex","activeInputIndex","activeTermValue","activeMilesValue","activeCoverage","activeDeductible","vehicleDetails","planCost","productCount","planCount","selectedProductCount","monthlyCost","computed","toFixed","searchVinView","errorMessage","pageBusy","showSelectedProductsDrawer","handleProductsWrapperDragged","console","log","handleCostWrapperDragged","handleInputFilledOut","handleTermWrapperDragged","handleMilesWrapperDragged","subscribe","$","each","fooIndex","pop","removeAll","i","includes","RatedTerm","TermMiles","push","sort","a","b","columnData","draggableIndex","makeCardsDraggable","domElement","callback","bindingValue","TermMonths","Rates","index","formData","inputValue","displayName","isRequired","type","callBack","loadVehicleDetails","isCurrent","isComplete","getProductsForVin","VIN","vehicleApi","ajax","success","result","Results","async","Products","length","isSelected","RatedTerms","setTimeout","draggableElement","elementChildren","children","elementChildrenCount","setCardHeightDraggableOffset","snapArray","Array","generateDraggableIndex","value01","value02","Math","abs","round","animateAllCards","addClass","TweenMax","to","opacity","removeClass","transform","border","newDraggable","Draggable","create","edgeResistance","throwProps","snap","zIndexBoost","maxDuration","onClick","onDrag","y","onThrowUpdate","onThrowComplete","endY","offsetDifference","css","height","showHideOptionsDrawer","addProductWithRate","generatePlanCostAndProductCount","removeProductWithRate","backToSearch","listenForKeyDown","setValueType","keydown","event","which","preventDefault","incrementInputIndex","decrementInputIndex","totalPlanCost","productsCount","DealerCost","init","top","document","ready","applyBindings","getElementById"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAAjB,OAAOC,OAAP,GAAiB;AACb6F,iBAAa,qBAASC,IAAT,EAAeC,MAAf,EAAuBC,WAAvB,EAAoCC,aAApC,EAAmDC,QAAnD,EAA4D;AACrE;AACA,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCC,kBAAMR,IAAN,EAAY;AACRS,yBAAS;AACL,oCAAgBP,WADX;AAEL,qCAAiBC;AAFZ,iBADD;AAKRO,sBAAMC,KAAKC,SAAL,CAAeR,QAAf,CALE;AAMRH,wBAAQA;;AANA,aAAZ,EASKY,IATL,CASU;AAAA,uBAAOC,IAAIC,IAAJ,EAAP;AAAA,aATV,EAUKF,IAVL,CAUU,UAACG,IAAD,EAAU;AACZV,wBAAQU,IAAR;AACH,aAZL;AAaH,SAdM,CAAP;AAeH,KAlBY;AAmBbC,wBAAoB,4BAASjB,IAAT,EAAeC,MAAf,EAAuBC,WAAvB,EAAoCC,aAApC,EAAmD3E,YAAnD,EAAiEH,YAAjE,EAA+E+E,QAA/E,EAAyFc,SAAzF,EAAmG;AACnH;AACA,eAAO,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCC,kBAAMR,IAAN,EAAY;AACJS,yBAAS;AACL,oCAAgBP,WADX;AAEL,qCAAiBC,aAFZ;AAGL,qCAAiB3E,YAHZ;AAIL,qCAAiBH;AAJZ,iBADL;AAOJqF,sBAAMC,KAAKC,SAAL,CAAeR,QAAf,CAPF;AAQJH,wBAAQA;AARJ,aAAZ,EAUKY,IAVL,CAUU;AAAA,uBAAOC,IAAIC,IAAJ,EAAP;AAAA,aAVV,EAWKF,IAXL,CAWU,UAACG,IAAD,EAAS;AACXV,wBAAQU,IAAR;AACH,aAbL;AAcH,SAfM,CAAP;AAgBH;AArCY,CAAjB","file":"viewModel.45392886.map","sourceRoot":"..","sourcesContent":["module.exports = {\n    products: {\n        url: 'https://tlcsvcapi.uat.taillight.xyz/RSS.SPAN.BusinessServices/restvehicleproductsvc.svc/RetrieveVehicleProductsByVIN',\n        authToken: 'eyJ0eXAiOiJVU0VSQUNDT1VOVCIsImFsZyI6Mn0.eyJqdGkiOiI5OTZlMmE0MC1hODVmLTQ2YzktYTQ0ZS1kNjU4NGJjYjAyMjQiLCJzdWIiOiI1NjIwZmQxZmMyNTcxNzFmZWMxOWYzMjY7ZWFzeWNhcmVhZG1pbjs1NjE2YTU5ZDQ5M2ZiNzFiZGMxNDkyYTUiLCJhdWQiOiJyaXN0a2VuLmNvbSIsIm5iZiI6IjE1MjAzNjk5NDgiLCJleHAiOiIxNTIwNDU2MzQ4IiwiQ2xhaW1zIjpbeyJLZXkiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiLCJWYWx1ZSI6IlNQQU4gQURNSU4ifV19.okOG2OGJCmCDkOU1l3kRdCGnnsNqaAGrJyS4VN7YBH4=',\n        tempBodyData: {\n            dateOfSale: '2018-03-06',\n            dealerAccountCode: '014996',\n            makeModelInfo: null,\n            partnerSpecificEligibility: [{\"key\": \"dealSaleType\", \"value\": \"RetailFinanced\"}],\n            productPlanType: null,\n            providerCode: 'EASYCARE',\n            vehicleCertification: 'None',\n            vehicleIdentificationNumber: '1FT7W2B69GEA00053',\n            vehicleInservice: null,\n            vehicleOdometer: '1000',\n            vehicleUsageTypes: ['Personal'],\n            quoteSessionNumber: '94763b6d-5429-4c2f-9876-55a46821b9e7',\n            productCodeFilters: null\n        }\n    },\n    rates: {\n        url: 'https://tlcsvcapi.uat.taillight.xyz/rss.span.businessservices/restvehicleratesvc.svc/RetrieveVehicleRates',\n        authToken: 'eyJ0eXAiOiJVU0VSQUNDT1VOVCIsImFsZyI6Mn0.eyJqdGkiOiJlNTE4Njk2MC1lYzc2LTRkZjctOTY2YS1iMDY5Y2E0ODY1ZDUiLCJzdWIiOiI1NjIwZmQxZmMyNTcxNzFmZWMxOWYzMjY7ZWFzeWNhcmVhZG1pbjs1NjE2YTU5ZDQ5M2ZiNzFiZGMxNDkyYTUiLCJhdWQiOiJyaXN0a2VuLmNvbSIsIm5iZiI6IjE1MjY2NjYxOTIiLCJleHAiOiIxNTI2NzUyNTkyIiwiQ2xhaW1zIjpbeyJLZXkiOiJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiLCJWYWx1ZSI6IlNQQU4gQURNSU4ifSx7IktleSI6Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSIsIlZhbHVlIjoiUE9SVEFMIEFETUlOIn1dfQ.19WgLXhzHgX6rPiQjRktGRNFZeW6xre71NtN0VJVZgs=',\n        postmanToken: {\n            key: 'Postman-Token',\n            value: 'a9834658-8490-07c0-6f58-ca47bbcb5474'\n        },\n        cacheControl: {\n            key: 'Cache-Control',\n            value: 'no-cache'\n        },\n\n\n        tempBodyData: {\n            dateOfSale: '2018-05-18',\n                dealerAccountCode: '014996',\n            eligibilitySessionID: null,\n            partnerSpecificEligibility: [],\n            productPlanType: null,\n            productsToRate: [\n            {\n                PartnerSpecificFields: {\n                    FlexFields: [\n                        {\n                            FieldName: 'SORTORDER',\n                            FieldType: 2,\n                            FieldValue: '2'\n                        }\n                    ]\n                },\n                ApplicationCode: 'C1032605',\n                BaseNoUpgradeProduct: null,\n                CertificationType: 0,\n                DisplayName: 'EC Select Plus 6 StandAlone 2014 (US):2605',\n                InternalProductId: 'C1032605',\n                InternalProductVersionId: null,\n                InternalRatingProgramId: null,\n                IsDealerException: false,\n                IsInserviceRequired: false,\n                IsNewCoverage: false,\n                IsVehicleFinancialsRequired: false,\n                IsWrapCoverage: false,\n                ParentProductType: {\n                    PartnerSpecificFields: {\n                        FlexFields: []\n                    },\n                    ApplicationCode: 'ECSP',\n                    ApplicationSubCode: null,\n                    DisplayName: null,\n                    InternalProductTypeId: null,\n                    ParentProductRatingCategory: {\n                        PartnerSpecificFields: {\n                            FlexFields: [\n                                {\n                                    FieldName: 'COMMERCE-RATE-TYPE',\n                                    FieldType: 2,\n                                    FieldValue: 'ECSP'\n                                }\n                            ]\n                        },\n                        Abbreviation: 'ECSP',\n                        ApplicationCode: 'ECSP',\n                        DisplayName: null\n                    },\n                    PartnerCode: 'ECSP',\n                    ProfitSettingCategoryName: null,\n                    SettingDependentSubCode: null,\n                    UpgradesInternalProductTypeId: null\n                },\n                PartnerCode: 'C1032605',\n                ProductCoverages: [\n                    {\n                        CoverageDeductibles: [\n                            {\n                                ProductDeductible: {\n                                    PartnerSpecificFields: {\n                                        FlexFields: []\n                                    },\n                                    Abbreviation: '000',\n                                    DisplayName: '0.00',\n                                    InternalDeductibleId: '0.00',\n                                    NumericValue: 0,\n                                    PartnerCode: '0.00'\n                                }\n                            }\n                        ],\n                        ProductCoverage: {\n                            PartnerSpecificFields: {\n                                FlexFields: []\n                            },\n                            Abbreviation: 'T.SelectPlus',\n                            Description: 'SelectPlus Time only',\n                            DisplayName: 'SelectPlus: Time only',\n                            InternalCoverageId: 'T.SelectPlus',\n                            IsLWBaseCoverage: false,\n                            NumericValue: 0,\n                            PartnerCode: 'T.SelectPlus'\n                        },\n                        ProductTerms: null\n                    }\n                ],\n                ProductOptions: [],\n                RateCalculationMethod: 0,\n                SortOrder: '2',\n                UpgradeProducts: null\n            }\n        ],\n            providerCode: 'EASYCARE',\n            vehicleCertification: 'None',\n            vehicleFinancials: {\n            AmountFinanced: 0,\n                DMSDealNumber: '',\n                DaysToFirstPayment: 0,\n                FinancedAPR: 0,\n                FinancedTermMonths: 0,\n                FirstPaymentDate: '',\n                LenderAddress1: null,\n                LenderAddress2: null,\n                LenderCity: null,\n                LenderCode: null,\n                LenderEmail: null,\n                LenderName: null,\n                LenderPhone: null,\n                LenderState: null,\n                LenderZip: null,\n                MSRP: 0,\n                MoneyFactor: 0,\n                PurchasePrice: 0,\n                StockNumber: '',\n                VehicleSaleType: 'RetailFinanced'\n        },\n            vehicleInservice: null,\n                vehicleOdometer: '2500',\n            vehicleToRate: {\n            InternalMakeId: 'FORD',\n                InternalModelId: '1FT7W2B69G',\n                MakeName: '',\n                ModelName: null,\n                ModelYear: 2016,\n                VehicleIdentification: '1FT7W2B69GEA00053'\n        },\n            vehicleUsageTypes: [\n                'Personal'\n            ],\n                quoteSessionNumber: 'd219be83-c5d8-4fcd-9dc7-f0c36c8fa409'\n        }\n    }\n};\n\n\n\n","module.exports = {\n    getProducts: function(path, method, contentType, authorization, bodyData){\n        // console.log(bodyData.vehicleIdentificationNumber);\n        return new Promise((resolve, reject) => {\n            fetch(path, {\n                headers: {\n                    'content-type': contentType,\n                    'Authorization': authorization\n                },\n                body: JSON.stringify(bodyData),\n                method: method,\n\n            })\n                .then(res => res.json())\n                .then((data) => {\n                    resolve(data);\n                })\n        });\n    },\n    getRatesForProduct: function(path, method, contentType, authorization, cacheControl, postmanToken, bodyData, productId){\n        // console.log('getRatesForProduct called with id ' + productId);\n        return new Promise((resolve, reject) => {\n            fetch(path, {\n                    headers: {\n                        'content-type': contentType,\n                        'Authorization': authorization,\n                        'Cache-Control': cacheControl,\n                        'Postman-Token': postmanToken\n                    },\n                    body: JSON.stringify(bodyData),\n                    method: method\n                })\n                .then(res => res.json())\n                .then((data) =>{\n                    resolve(data);\n                });\n        });\n    }\n};","const config = require('./config_1.js');\nconst dataService = require('./fetchData.js');\n\nfunction AppViewModel() {\n\n    var self = this;\n\n    // The starting position of the app - This sets how many 'cards' from the top the 'focus' section is plus a 'cardHeight' in Pixels\n    self.defaultIndex = 2;\n    self.cardHeight = 180;\n    self.inputMarginTop = ko.observable(0);\n\n    // Local variable for our animation duration\n    var duration = 0.25;\n\n    // Temp Loan term var\n    self.loanTerm = ko.observable(48);\n\n    // Boolean value that decides if the user is searching by price, or by term and miles\n    self.displayDataType = ko.observable('Price');\n\n    // Boolean to stop certain user events if draggable or throw is happening\n    self.isDragging = ko.observable(false);\n\n    //Array that we use to store our draggables in so that we can garbage collect later\n    self.allDraggables = [];\n\n    // This array is our main source of Data for the app\n    self.productsWithDetails = ko.observableArray();\n    self.activeProductRates = ko.observableArray();\n    self.activeProductTerms = ko.observableArray();\n    self.activeProductMiles = ko.observableArray();\n\n    // Vars for setting the indexes\n    self.activeProductIndex = ko.observable(self.defaultIndex);\n    self.activeRateIndex = ko.observable(self.defaultIndex);\n    self.activeTermIndex = ko.observable(self.defaultIndex);\n    self.activeMilesIndex = ko.observable(self.defaultIndex);\n    self.activeInputIndex = ko.observable(0);\n\n    self.activeTermValue = ko.observable(0);\n    self.activeMilesValue = ko.observable(0);\n\n    // Vars for display Coverages and Deductibles and other information\n    self.activeCoverage = ko.observable();\n    self.activeDeductible = ko.observable();\n\n    self.vehicleDetails = ko.observable();\n\n    self.planCost = ko.observable(0);\n    self.productCount = ko.observable(0);\n    self.planCount = ko.observable(0);\n    self.selectedProductCount = ko.observable(0);\n    self.monthlyCost = ko.computed(function(){\n        return (self.planCost() / self.loanTerm()).toFixed(2)\n    });\n\n    // Error message and busy page vars\n    self.searchVinView = ko.observable(true);\n    self.errorMessage = ko.observable('');\n    self.pageBusy = ko.observable(false);\n    self.showSelectedProductsDrawer = ko.observable(false);\n    /*\n     *\n     *  Event handler callbacks that get triggered once a column on the UI completes its 'drag'\n     *\n     */\n    // Handle completion of products dragged\n    self.handleProductsWrapperDragged = function(){\n        console.log('Producgs Wrapper dragged');\n    };\n\n    self.handleCostWrapperDragged = function(){\n        console.log('Cost Wrapper dragged');\n    };\n\n    self.handleInputFilledOut = function(){\n        console.log('One input filled out');\n    };\n\n    self.handleTermWrapperDragged = function(){\n        console.log('Term wrapper dragged');\n    };\n\n    self.handleMilesWrapperDragged = function(){\n        console.log('Miles wrapper dragged');\n    };\n\n    // Every time a user changes the display data type on the UI, we need to update our draggables, hence the subscribe function\n    self.displayDataType.subscribe(function(){\n\n        switch (self.displayDataType()) {\n\n            // If the user wants to sort the UI by 'Miles'\n            case 'Miles':\n\n                //Remove all draggable objects except our products wrapper and prices wrapper, as we will be recreating these\n                $.each(self.allDraggables, function(fooIndex){\n                    if(fooIndex > 0){\n                        self.allDraggables.pop();\n                    }\n                });\n\n                self.activeProductTerms.removeAll();\n                self.activeProductMiles.removeAll();\n\n                // Re-populate our activeProductMiles array\n                $.each(self.activeProductRates(), function(i) {\n                    if (!self.activeProductMiles().includes(self.activeProductRates()[i].RatedTerm.TermMiles)) {\n                        self.activeProductMiles.push(self.activeProductRates()[i].RatedTerm.TermMiles);\n                        console.log(self.activeProductRates()[i].RatedTerm);\n                        // Sort our terms in ascending order\n                        self.activeProductMiles(self.activeProductMiles().sort(function (a, b) {\n                            return a - b\n                        }));\n                        self.activeMilesValue(self.activeProductTerms()[self.activeMilesIndex()]);\n                    }\n                });\n\n                // Re-populate our activeProductTerms array with only the terms for a given mileage\n                $.each(self.activeProductRates(), function(i) {\n                    if (self.activeProductMiles()[self.defaultIndex] === self.activeProductRates()[i].RatedTerm.TermMiles) {\n                        self.activeProductTerms.push(self.activeProductRates()[i].RatedTerm.TermMiles);\n                    }\n                });\n\n                // And create new draggables based on the updated contents of the dom element\n                $.each(self.columnData, function(draggableIndex){\n                    if( draggableIndex > 0 ) {\n                        self.makeCardsDraggable($(self.columnData[draggableIndex].domElement), self.columnData[draggableIndex].callback, self.columnData[draggableIndex].bindingValue);\n                    }\n                });\n\n                // The re-populate our terms with only those terms that match the current miles\n\n                break;\n\n            case 'Term':\n\n                self.activeProductTerms.removeAll();\n                self.activeProductMiles.removeAll();\n\n                // Re-populate our activeProductTerms array\n                $.each(self.activeProductRates(), function(i) {\n                    if (!self.activeProductTerms().includes(self.activeProductRates()[i].RatedTerm.TermMonths)) {\n                        self.activeProductTerms.push(self.activeProductRates()[i].RatedTerm.TermMonths);\n                        // Sort our terms in ascending order\n                        self.activeProductTerms(self.activeProductTerms().sort(function (a, b) {\n                            return a - b\n                        }));\n                        self.activeTermValue(self.activeProductTerms()[self.activeTermIndex()]);\n                    }\n                });\n\n                break;\n\n            case 'Price':\n\n\n\n                break;\n\n        }\n\n    });\n\n    /*\n     *\n     * draggable column index subscribers - this is how we update the UI - by listening to changes to the indexes which are called on the end of a draggable.\n     *\n     */\n\n    // Subscribe to changes to the activeProductIndex\n    self.activeProductIndex.subscribe(function(){\n\n        //Remove all draggable objects except our products wrapper, as we will be recreating these\n        $.each(self.allDraggables, function(fooIndex){\n            if(fooIndex > 0){\n                self.allDraggables.pop();\n            }\n        });\n\n        // Update our activeProductRates Array with our new rates\n        self.activeProductRates(self.productsWithDetails()[self.activeProductIndex()].Rates);\n\n        // Reset our activeProductTerms and activeProductMiles\n        self.activeProductTerms.removeAll();\n        self.activeProductMiles.removeAll();\n\n        // Update our terms and miles arrays\n        $.each(self.activeProductRates(), function(i){\n\n            // Populate our activeProductTerms array\n            if(!self.activeProductTerms().includes(self.activeProductRates()[i].RatedTerm.TermMonths)){\n                self.activeProductTerms.push(self.activeProductRates()[i].RatedTerm.TermMonths);\n                // Sort our terms in ascending order\n                self.activeProductTerms(self.activeProductTerms().sort(function(a, b){return a-b}));\n                self.activeTermValue(self.activeProductTerms()[self.activeTermIndex()]);\n            }\n\n            // Populate our activeProductMiles array\n            if(!self.activeProductMiles().includes(self.activeProductRates()[i].RatedTerm.TermMiles)){\n                self.activeProductMiles.push(self.activeProductRates()[i].RatedTerm.TermMiles);\n                // Sort our terms in ascending order\n                self.activeProductMiles(self.activeProductMiles().sort(function(a, b){return a-b}));\n                self.activeMilesValue(self.activeProductTerms()[self.activeMilesIndex()]);\n            }\n\n        });\n\n        // And create new draggables based on the updated contents of the dom element\n        $.each(self.columnData, function(draggableIndex){\n            if( draggableIndex > 0 ) {\n                self.makeCardsDraggable($(self.columnData[draggableIndex].domElement), self.columnData[draggableIndex].callback, self.columnData[draggableIndex].bindingValue);\n            }\n        });\n        console.log(self.activeProductRates());\n    });\n\n    self.activeTermIndex.subscribe(function(){\n        console.log('self.activeTermIndex called and value is ' + self.activeProductIndex());\n    });\n\n    self.activeMilesIndex.subscribe(function(){\n        console.log('self.activeMilesIndex called and value is ' + self.activeTermIndex());\n    });\n\n    self.activeRateIndex.subscribe(function(){\n        console.log('self.activeRateIndex called and value is ' + self.activeRateIndex());\n    });\n\n    self.activeInputIndex.subscribe(function(){\n        console.log('self.activeInputIndex called and value is ' + self.activeInputIndex());\n    });\n\n\n    /*\n     *\n     * UI Draggable\n     *\n     */\n\n    // Each object in this array represents a column in our draggable UI - Included are the dom element to be selected, a reference to a callback and the KO observable that it updates.\n    self.columnData = [\n        {\n            index: 0,\n            domElement: '.products-wrapper',\n            callback: self.handleProductsWrapperDragged,\n            bindingValue: self.activeProductIndex\n        },\n        {\n            index: 1,\n            domElement: '.cost-wrapper',\n            callback: self.handleCostWrapperDragged,\n            bindingValue: self.activeRateIndex\n        },\n        {\n            index: 2,\n            domElement: '.term-wrapper',\n            callback: self.handleTermWrapperDragged,\n            bindingValue: self.activeTermIndex\n        },\n        {\n            index: 3,\n            domElement: '.miles-wrapper',\n            callback: self.handleMilesWrapperDragged,\n            bindingValue: self.activeMilesIndex\n        }\n\n    ];\n\n    self.formData = [\n        {\n            index: 0,\n            inputValue: \"vehicleVin\",\n            displayName: \"VIN Number\",\n            isRequired: true,\n            type: \"text\",\n            callBack: function(){\n                self.loadVehicleDetails(this.value());\n            },\n            value: ko.observable(),\n            isCurrent: ko.observable(true),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 1,\n            inputValue: \"purchasePrice\",\n            displayName: \"Purchase Price\",\n            isRequired: true,\n            type: \"text\",\n            callBack: false,\n            value: ko.observable(),\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 2,\n            inputValue: \"purchaseDate\",\n            displayName: \"Purchase Date\",\n            isRequired: true,\n            type: \"text\",\n            callBack: false,\n            value: ko.observable(),\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        },\n        {\n            index: 3,\n            inputValue: \"submit\",\n            displayName: \"\",\n            isRequired: true,\n            type: \"button\",\n            callBack: function(){\n                self.getProductsForVin(self.formData[0].value());\n            },\n            value: null,\n            isCurrent: ko.observable(false),\n            isComplete: ko.observable(false)\n\n        }\n    ];\n\n\n    /*\n    *\n    * Data retrieval and object creation functions\n    *\n    */\n\n    //Retrieve the vehicle details from the VIN\n    self.loadVehicleDetails = function(VIN){\n\n        console.log(VIN);\n\n        if(VIN) {\n            var vehicleApi = 'https://vpic.nhtsa.dot.gov/api/vehicles/DecodeVin/' + VIN + '?format=json';\n\n            $.ajax({url: vehicleApi,\n                success: function(result){\n                    self.vehicleDetails(result.Results);\n                },\n                async: true});\n\n        }\n    };\n\n    // Gets all products for our VIN\n    self.getProductsForVin = function(VIN){\n\n        // Set our pageBusy UI Var\n        self.pageBusy(true);\n\n        // Empty our product object first\n        self.productsWithDetails([]);\n\n        // Define the values we need to get products for our vin\n        const path = config.products.url;\n        const method = 'POST';\n        const contentType = 'application/json';\n        const authorization = config.products.authToken;\n        const bodyData = config.products.tempBodyData;\n\n        // If we have a VIN from the UI, use this one instead - mock data object has a hard-coded vin as a fallback\n        if(VIN){\n            bodyData.vehicleIdentificationNumber = VIN;\n        }\n\n        // Make a call to our getProducts method\n        dataService.getProducts(path, method, contentType, authorization, bodyData)\n            .then(function(data){\n\n                self.productCount(data.Products.length);\n\n                $.each(data.Products, (index)=>{\n\n                    data.Products[index].isSelected = ko.observable(false);\n                    data.Products[index].Rates = [];\n\n                    // Define the values we need to get rates for our products\n                    const path = config.rates.url;\n                    const method = 'POST';\n                    const contentType = 'application/json';\n                    const authorization = config.rates.authToken;\n                    const bodyData = config.rates.tempBodyData;\n\n                    bodyData.productsToRate[0].InternalProductId = data.Products[index].InternalProductId;\n                    bodyData.productsToRate[0].ApplicationCode = data.Products[index].InternalProductId;\n\n                    const cacheControl = 'no-cache';\n                    const postmanToken = 'a5a12bf3-5601-86fe-f7ae-93b8540e6c72';\n\n                    // Call our getRatesForProduct method once for each product\n                    dataService.getRatesForProduct(path, method, contentType, authorization, cacheControl, postmanToken, bodyData, data.Products[index].InternalProductId)\n                        .then(function(rates){\n\n                            // Add an isSelected observable to each of our rates\n                            $.each(rates.Rates[0].RatedTerms, function(i){\n                                rates.Rates[0].RatedTerms[i].isSelected = ko.observable(false);\n                                data.Products[index].Rates.push(rates.Rates[0].RatedTerms[i]);\n                            });\n                        })\n                        .then(function(){\n                            // Update our activeProductRates Array with our new rates\n                            self.activeProductRates(self.productsWithDetails()[self.activeProductIndex()].Rates);\n\n                            // Update our planCount var\n                            self.planCount(self.productsWithDetails()[self.activeProductIndex()].Rates.length);\n\n                            // Set our activeMilesValue and activeTermValue\n                            //self.activeMilesValue();\n                            //self.activeTermValue();\n                        })\n                        .then(function(){\n\n                            self.activeProductTerms.removeAll();\n                            self.activeProductMiles.removeAll();\n                            // Add an isSelected observable to each of our rates\n                            $.each(self.activeProductRates(), function(i){\n\n                                // Populate our activeProductTerms array\n                                if(!self.activeProductTerms().includes(self.activeProductRates()[i].RatedTerm.TermMonths)){\n                                    self.activeProductTerms.push(self.activeProductRates()[i].RatedTerm.TermMonths);\n                                    // Sort our terms in ascending order\n                                    self.activeProductTerms(self.activeProductTerms().sort(function(a, b){return a-b}));\n                                    self.activeTermValue(self.activeProductTerms()[self.activeTermIndex()]);\n                                }\n\n                                // Populate our activeProductMiles array\n                                if(!self.activeProductMiles().includes(self.activeProductRates()[i].RatedTerm.TermMiles)){\n                                    self.activeProductMiles.push(self.activeProductRates()[i].RatedTerm.TermMiles);\n                                    // Sort our terms in ascending order\n                                    self.activeProductMiles(self.activeProductMiles().sort(function(a, b){return a-b}));\n                                    self.activeMilesValue(self.activeProductTerms()[self.activeMilesIndex()]);\n                                }\n                            });\n                        });\n\n                    // Update our observable array with the data\n                    self.productsWithDetails.push(data.Products[index]);\n\n                });\n\n                // Temporarily using a timeout until I get the promise sorted\n                setTimeout(function(){\n                        $.each(self.columnData, function(draggableIndex){\n                            self.makeCardsDraggable($(self.columnData[draggableIndex].domElement), self.columnData[draggableIndex].callback, self.columnData[draggableIndex].bindingValue);\n                        });\n                        // Turn off our pageBusy var\n                        self.pageBusy(false);\n                }, 1000);\n\n                console.log(self.productsWithDetails());\n            });\n\n\n        // Animated our views so that we go to scroll view.\n        self.searchVinView(false);\n    };\n\n\n    //Makes the selected elements on the DOM draggable\n    self.makeCardsDraggable = function(draggableElement, callBack, bindingValue){\n\n        console.log('makeCardsDraggable called for ' + draggableElement);\n\n        // Make our draggable columns draggable\n        var elementChildren = $(draggableElement).children(),\n            elementChildrenCount = $(elementChildren).length;\n\n        self.setCardHeightDraggableOffset(elementChildren);\n\n        // Generate a list of snap values - our Draggable object needs this to know where to snap to on dragging and throwing\n        var snapArray = new Array();\n        for(var i = -self.defaultIndex; i < elementChildrenCount - self.defaultIndex; i++){\n            snapArray.push( -(i * self.cardHeight));\n        }\n\n        // Function to return the index of the card that is in the 'active-card-frame'\n        var generateDraggableIndex = function(value01, value02){\n            return Math.abs(Math.round((value01/value02)) - self.defaultIndex);\n        };\n\n        // Set the default binding values for the cards\n        if( elementChildrenCount == 1){\n            bindingValue(0);\n        } else if ( elementChildrenCount == 2 ) {\n            bindingValue(1);\n        } else {\n            bindingValue(self.defaultIndex);\n        }\n\n        // Function to set values on cards that are not the current card - Right now just opacity\n        var animateAllCards = function(children, index){\n\n            $.each(children, function(i){\n\n                if( i === index ){\n                    $(elementChildren[i]).children().addClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 0\n                        // transform: 'scale3d(1, 1, 1)'\n                    });\n                } else if (i === index - 1 || i === index + 1){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.95, 1, 1)'\n                    });\n                } else if (i === index - 2 || i === index + 2){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.9, 1, 1)'\n                    });\n                } else if (i === index - 3 || i === index + 3){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.85, 1, 1)'\n                    });\n                } else if (i === index - 4 || i === index + 4){\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                        // transform: 'scale3d(0.8, 1, 1)'\n                    });\n                } else if (i < index - 4 || i > index + 4) {\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 1\n                    });\n                } else {\n                    $(elementChildren[i]).children().removeClass('active-product');\n                    TweenMax.to($(elementChildren[i]).children().children('.card-content-overlay'), duration, {\n                        opacity: 0\n                    });\n                }\n\n            });\n        };\n\n\n        // Call our animated card methods for the first time...\n        animateAllCards(elementChildren, self.defaultIndex);\n\n        // However, if the total number of children is less than our defaultIndex (2) the first one in the array needs to be set as 'active'\n        if( elementChildrenCount <= self.defaultIndex ){\n            if( elementChildrenCount == 1 || elementChildrenCount ==  self.defaultIndex ){\n                $(elementChildren[0]).children('.card-content').addClass('active-product');\n                TweenMax.to($(elementChildren[0]).children('.card-content').children('.card-content-overlay'), duration, {\n                    opacity: 0,\n                    transform: 'scale3d(1, 1, 1)',\n                    border: 'solid 2px green'\n                });\n            }\n        }\n\n        //Create the draggable element and assign it a var\n        var newDraggable = Draggable.create(draggableElement, {\n            type: \"y\",\n            edgeResistance: 0.95,\n            throwProps:true,\n            snap: snapArray,\n            zIndexBoost: false,\n            maxDuration: duration,\n            onClick: function(){\n                self.isDragging(true);\n            },\n            onDrag: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                animateAllCards(elementChildren, draggableIndex);\n                self.isDragging(true);\n            },\n            onThrowUpdate: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                animateAllCards(elementChildren, draggableIndex);\n                self.isDragging(true);\n            },\n            onThrowComplete: function(){\n                bindingValue(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n                callBack(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n                self.isDragging(false);\n            }\n        });\n\n        //If draggable item lists is shorter than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n\n            var offsetDifference = (self.defaultIndex) - elementChildrenCount;\n\n            TweenMax.to(draggableElement, duration, {\n                y: (offsetDifference + 1) * self.cardHeight\n            });\n        } else {\n            TweenMax.to(draggableElement, duration, {\n                y: 0\n            });\n        }\n\n        //Push all draggables to an array so that we can access them later.\n        self.allDraggables.push(newDraggable);\n    };\n\n    // Function that sets the height of each card based off of our cardHeight Var, as as the topoffset of each draggable Container.\n    self.setCardHeightDraggableOffset = function(elementChildren){\n\n        // Set all our cards height to the self.cardHeight variable\n        $(elementChildren).css({ height: self.cardHeight + 'px'});\n        // Also set the height of our active-card-frame\n        $('.active-card-frame').css({ height: self.cardHeight + 'px'});\n\n    };\n\n\n    /*\n     *\n     * Showing and Hiding options drawer\n     *\n     */\n\n    // Function to show or hide the selected-options-drawer\n    self.showHideOptionsDrawer = function(){\n        self.showSelectedProductsDrawer(!self.showSelectedProductsDrawer());\n    };\n\n    /*\n     *\n     * adding and remove products with rates\n     *\n     */\n\n    // Add product with rate\n    self.addProductWithRate = function(data){\n\n        // First set our product isSelected observable to true\n        self.productsWithDetails()[self.activeProductIndex()].isSelected(true);\n\n        // Then loop through all of its rates and set all to false...\n        var rates = self.productsWithDetails()[self.activeProductIndex()].Rates;\n        $.each(rates, function(index){\n            rates[index].isSelected(false);\n        });\n        // Finally set the rate at the activeRateIndex to true\n        rates[self.activeRateIndex()].isSelected(true);\n        // And updated our Aside observables\n        self.generatePlanCostAndProductCount();\n    };\n\n    // Remove product with rate\n    self.removeProductWithRate = function(index, data){\n        // First set our product isSelected observable to false\n        self.productsWithDetails()[index()].isSelected(false);\n\n        // Then loop through all of its rates and set all to false...\n        var rates = self.productsWithDetails()[index()].Rates;\n        $.each(rates, function(index){\n            rates[index].isSelected(false);\n        });\n        // And updated our Aside observables\n        self.generatePlanCostAndProductCount();\n    };\n\n    // Handle going back to search page view\n    self.backToSearch = function(){\n        // Toggle our Views\n        self.searchVinView(true);\n        // Animate the martinTop of our inputs container\n        $.each(self.formData, function(index){\n            self.formData[index].isCurrent(false);\n            if(index === 0){\n                self.formData[index].isCurrent(true);\n            }\n        });\n        self.inputMarginTop(self.defaultIndex * self.cardHeight );\n        // And re-add our event listener to the 'tab' keydown\n        self.listenForKeyDown();\n    };\n\n    // Decide what type of sorting the user wants to use\n    self.setValueType = function(data){\n        self.displayDataType(data);\n    };\n\n    // Keydown event listener which handles different key events\n    self.listenForKeyDown = function(){\n        $( \"#commerceProductApp\" ).keydown(function(event) {\n\n            switch ( event.which ){\n\n                // If user taps tab, we focus on next input\n                case 9:\n                    event.preventDefault();\n                    self.incrementInputIndex( self.formData[self.activeInputIndex()] );\n                    break;\n\n                // If the users taps 'enter' and we are in the searchVinView and on the last input (submit button) call the function that loads products\n                case 13:\n                    if( self.searchVinView() && self.activeInputIndex() === (self.formData.length - 1) ){\n                        event.preventDefault();\n                        self.getProductsForVin(self.formData[0].value());\n                    }\n                    break;\n\n            }\n        });\n    };\n\n    // Handle when a user clicks on the up or down arrows on the input screen\n    self.incrementInputIndex = function(data){\n        if( data.index < self.formData.length -1 ) {\n            data.isCurrent(false);\n            self.formData[data.index + 1].isCurrent(true)\n            self.activeInputIndex(data.index + 1);\n            self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        }\n        return\n    };\n\n    self.decrementInputIndex = function(data){\n        if( data.index > 0 ) {\n            data.isCurrent(false);\n            self.formData[data.index - 1].isCurrent(true);\n            self.activeInputIndex(data.index - 1);\n            self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        }\n        return\n    };\n\n\n    /*\n     *\n     * Aside observables calculator\n     *\n     */\n\n    self.generatePlanCostAndProductCount = function(){\n        var totalPlanCost = 0;\n        var productsCount = 0;\n        $.each(self.productsWithDetails(), function(index){\n            if(self.productsWithDetails()[index].isSelected()){\n                productsCount ++;\n                $.each(self.productsWithDetails()[index].Rates, function(i){\n                    if(self.productsWithDetails()[index].Rates[i].isSelected()){\n                        totalPlanCost += self.productsWithDetails()[index].Rates[i].DealerCost;\n                    }\n                });\n            }\n        });\n        self.planCost(totalPlanCost);\n        self.selectedProductCount(productsCount);\n    };\n\n\n    /*\n     *\n     * Initialize the project\n     *\n     */\n\n    // This function bootstraps our page\n    self.init = function(){\n        // Set the top offset of our active area based on the self.defaultIndex;\n        $('.active-card-frame').css({ top: self.defaultIndex * self.cardHeight + 'px' });\n        // Set the top of our button\n        $('.add-product').css({ top: ((self.defaultIndex * self.cardHeight) + self.cardHeight/2) - 32 + 'px' });\n        // Set the top of the my-plan div\n        $('.my-plan').css({ top: ((self.defaultIndex + 1 ) * self.cardHeight) + 'px' });\n        // Add keydown event listeners to our app\n        self.listenForKeyDown();\n        // Animate the martinTop of our inputs container\n        self.inputMarginTop( - (((self.activeInputIndex()) * self.cardHeight) - (self.cardHeight * self.defaultIndex)) );\n        // Focus on the first input in our input list\n\n    };\n\n    // Inits the app once the document is ready\n    $(document).ready(function(){\n        self.init();\n    });\n\n\n\n\n    /*\n     *\n     * Return our revealing module\n     *\n     */\n\n    return {\n        //App vars\n        searchVinView: self.searchVinView,\n        errorMessage: self.errorMessage,\n        pageBusy: self.pageBusy,\n        cardHeight: self.cardHeight,\n\n        // Input array\n        activeInputIndex: self.activeInputIndex,\n        inputMarginTop: self.inputMarginTop,\n        incrementInputIndex: self.incrementInputIndex,\n        decrementInputIndex: self.decrementInputIndex,\n        vehicleDetails: self.vehicleDetails,\n        formData: self.formData,\n\n        // Products array\n        productsWithDetails: self.productsWithDetails,\n        activeProductIndex: self.activeProductIndex,\n        activeRateIndex: self.activeRateIndex,\n        activeTermIndex: self.activeTermIndex,\n        activeMilesIndex: self.activeMilesIndex,\n        activeTermValue: self.activeTermValue,\n        activeMilesValue: self.activeMilesValue,\n        activeProductRates: self.activeProductRates,\n        activeProductTerms: self.activeProductTerms,\n        activeProductMiles: self.activeProductMiles,\n        isDragging: self.isDragging,\n        backToSearch: self.backToSearch,\n\n        // Aside and UI vars\n        displayDataType: self.displayDataType,\n        planCost: self.planCost,\n        monthlyCost: self.monthlyCost,\n        selectedProductCount: self.selectedProductCount,\n        productCount: self.productCount,\n        planCount: self.planCount,\n        loanTerm: self.loanTerm,\n        setValueType: self.setValueType,\n        showHideOptionsDrawer: self.showHideOptionsDrawer,\n        showSelectedProductsDrawer :self.showSelectedProductsDrawer,\n        addProductWithRate: self.addProductWithRate,\n        removeProductWithRate: self.removeProductWithRate,\n        activeCoverage: self.activeCoverage,\n        activeDeductible: self.activeDeductible\n\n    };\n}\n\n// Activates knockout.js\nko.applyBindings(new AppViewModel(), document.getElementById('commerceProductApp'));\n\n// uat\n// easycareuat\n// U@Testing123\n// APCO-02"]}