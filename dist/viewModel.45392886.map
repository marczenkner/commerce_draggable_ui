{"version":3,"sources":["js/viewModel.js"],"names":["AppViewModel","self","defaultIndex","cardHeight","duration","productDetails","ko","observableArray","products","activeProduct","observable","costs","activeCost","surcharge","surchargeIndex","termMiles","activeTermMiles","termMonths","activeTermMonths","allDraggables","handleProductsWrapperDragged","returnedValue","InternalProductId","snapArray","costLength","length","i","push","draggableElement","$","elementChildrenCount","children","TweenMax","to","y","each","index","target","classList","contains","vars","snap","handleCostWrapperDragged","columnData","domElement","callback","loadProducts","ajax","url","success","result","productId","createProductDetails","async","productDetail","productIndex","productValues","isActiveProduct","isSelectedProduct","populateCosts","map","product","Rates","RatedTerms","details","cost","RetailCost","miles","RatedTerm","TermMiles","months","TermMonths","subscribe","makeCardsDraggable","callBack","elementChildren","Array","generateDraggableIndex","value01","value02","Math","abs","round","generateAllIndexes","opacity","transform","set","draggableIndex","newDraggable","Draggable","create","type","edgeResistance","throwProps","onDrag","onThrowUpdate","onThrowComplete","endY","init","document","ready","setActiveProduct","applyBindings","getElementById"],"mappings":"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","file":"viewModel.45392886.map","sourceRoot":"..","sourcesContent":["function AppViewModel() {\n    var self = this;\n\n    // The starting position of the app - This sets how many 'cards' from the top the 'focus' section is plus a 'cardHeight' in Pixels\n    self.defaultIndex = 2;\n    self.cardHeight = 120;\n\n    var duration = 0.25;\n\n    // This is where we cache all the product details for our quote\n    self.productDetails = ko.observableArray();\n\n    self.products = ko.observableArray();\n    self.activeProduct = ko.observable();\n\n    self.costs = ko.observableArray();\n    self.activeCost = ko.observable();\n\n    self.surcharge = ko.observableArray();\n    self.surchargeIndex = ko.observable();\n\n    self.termMiles = ko.observableArray();\n    self.activeTermMiles = ko.observable();\n\n    self.termMonths = ko.observableArray();\n    self.activeTermMonths = ko.observable();\n\n    //Array that we use to store our draggables in so that we can garbage collect later\n    self.allDraggables = [];\n\n    /* -- Event handlers that get triggered once a column on the UI completes its 'drag' */\n    self.handleProductsWrapperDragged = function(returnedValue){\n        //Set our activeProduct\n        self.activeProduct(self.products()[returnedValue].InternalProductId);\n\n        // We need to generate new snapValues for our costs array\n        var snapArray = [],\n            costLength = self.costs().length;\n        for(var i = -self.defaultIndex; i < costLength - self.defaultIndex; i++){\n            snapArray.push( -(i * self.cardHeight));\n        }\n\n        // Define the dom-element our draggable is attached to and it's children\n        var draggableElement = $('.cost-wrapper'),\n            elementChildrenCount = $(draggableElement).children().length;\n\n        //If our element list is less than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n            TweenMax.to(draggableElement, duration, {\n                y: (elementChildrenCount + 1) * self.cardHeight\n            });\n        } else {\n            TweenMax.to(draggableElement, duration, {\n                y: 0\n            });\n        }\n\n        $.each(self.allDraggables, function(index){\n            if(self.allDraggables[index][0]){\n                if (self.allDraggables[index][0].target.classList.contains('cost-wrapper')) {\n                    self.allDraggables[index][0].vars.snap = snapArray;\n                }\n            }\n        });\n    };\n\n    self.handleCostWrapperDragged = function(returnedValue){\n        // console.log(returnedValue);\n    };\n\n\n\n\n\n    // Each object in this array represents a column in our draggable UI - Included are the dom element to be selected, a reference to a callback and the KO observable that it updates.\n    self.columnData = [\n        {\n            index: 0,\n            domElement: '.products-wrapper',\n            callback: self.handleProductsWrapperDragged\n        },\n        {\n            index: 0,\n            domElement: '.cost-wrapper',\n            callback: self.handleCostWrapperDragged\n        }\n    ];\n\n    //load products\n    self.loadProducts = function(){\n        $.ajax({url: './mock_data/products.json',\n            success: function(result){\n                        $.each(result.products, function(index){\n                            self.products.push(result.products[index]);\n                            var productId = result.products[index].InternalProductId;\n                            self.createProductDetails(productId, index);\n                        });\n                    },\n            async: false});\n    };\n\n    //load products prices\n    self.createProductDetails = function(productId, index){\n        $.ajax({url: './mock_data/' + productId + '.json',\n            success: function(result) {\n                var productDetail = {\n                    productIndex: index,\n                    productId: productId,\n                    productValues: result,\n                    isActiveProduct: false,\n                    isSelectedProduct: false\n                };\n                self.productDetails.push(productDetail);\n            },\n            async: false});\n    };\n\n    // Populate our Costs Array - Happens each time the ActiveProduct is changed\n    self.populateCosts = function(){\n        self.costs([]);\n        self.productDetails().map(function(product){\n            if (product.productId === self.activeProduct()){\n                var costs = product.productValues.Rates[0].RatedTerms;\n                $.each(costs, function(index){\n                    var details = {\n                        cost: costs[index].RetailCost,\n                        miles: costs[index].RatedTerm.TermMiles,\n                        months: costs[index].RatedTerm.TermMonths\n                    };\n                    self.costs.push(details);\n                });\n            }\n        });\n    };\n\n    // Event subscriber for when we update the active product - This happens when we tap on a product\n    self.activeProduct.subscribe(function(){\n        self.populateCosts();\n    });\n\n    // Makes the selected elements on the DOM draggable\n    self.makeCardsDraggable = function(draggableElement, callBack){\n        // Make our draggable columns draggable\n        var elementChildren = $(draggableElement).children(),\n            elementChildrenCount = $(elementChildren).length;\n\n        // Generate a list of snap values\n        var snapArray = new Array();\n        for(var i = -self.defaultIndex; i < elementChildrenCount - self.defaultIndex; i++){\n            snapArray.push( -(i * self.cardHeight));\n        }\n\n        //If our element list is less than the top offset of the focus row, animate it to that position.\n        if(elementChildrenCount < (self.defaultIndex + 1)){\n            TweenMax.to(draggableElement, duration, {\n                y: (elementChildrenCount + 1) * self.cardHeight\n            });\n        }\n\n        // Function to return the index of the card that is in the 'active-card-frame'\n        var generateDraggableIndex = function(value01, value02){\n            return Math.abs(Math.round((value01/value02)) - self.defaultIndex);\n        };\n\n        var generateAllIndexes = function(children, index){\n            $.each(children, function(i){\n                if( i === index ){\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 1,\n                        transform: 'scale3d(1, 1, 1)'\n                    });\n                } else if (i === index - 1 || i === index + 1){\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.8,\n                        transform: 'scale3d(0.95, 1, 1)'\n                    });\n                } else if (i === index - 2 || i === index + 2){\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.6,\n                        transform: 'scale3d(0.9, 1, 1)'\n                    });\n                } else if (i === index - 3 || i === index + 3){\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.4,\n                        transform: 'scale3d(0.85, 1, 1)'\n                    });\n                } else if (i === index - 4 || i === index + 4){\n                    TweenMax.to($(elementChildren[i]).children(), duration, {\n                        opacity: 0.2,\n                        transform: 'scale3d(0.8, 1, 1)'\n                    });\n                } else if (i < index - 4 || i > index + 4) {\n                    TweenMax.set($(elementChildren[i]).children(), {\n                        transform: 'scale3d(1, 1, 1)'\n                    });\n                }\n\n            });\n        };\n\n        var draggableIndex = generateDraggableIndex(self.defaultIndex, self.cardHeight);\n        generateAllIndexes(elementChildren, self.defaultIndex);\n\n        //Create the draggable element and assign it a var\n        var newDraggable = Draggable.create(draggableElement, {\n            type: \"y\",\n            edgeResistance: 0.95,\n            throwProps:true,\n            snap: snapArray,\n            onDrag: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                generateAllIndexes(elementChildren, draggableIndex);\n                // console.log(draggableIndex);\n            },\n            onThrowUpdate: function(){\n                var draggableIndex = generateDraggableIndex(this.y, self.cardHeight);\n                generateAllIndexes(elementChildren, draggableIndex);\n                // console.log(draggableIndex);\n            },\n            onThrowComplete: function(){\n                callBack(Math.abs(Math.round(this.endY / self.cardHeight) - self.defaultIndex));\n            }\n        });\n\n        //Push all draggables to an array so that we can access them later.\n        self.allDraggables.push(newDraggable);\n    };\n\n    // This function bootstraps our page\n    self.init = function(){\n        // Load our products\n        self.loadProducts();\n        // Set our product id\n        self.activeProduct(self.products()[self.defaultIndex].InternalProductId);\n        // Make our cards draggable\n        $.each(self.columnData, function(index){\n            self.makeCardsDraggable($(self.columnData[index].domElement), self.columnData[index].callback);\n        });\n    };\n\n    // Inits the app once the document is ready\n    $(document).ready(function(){\n        self.init();\n    });\n\n    return {\n        products: self.products,\n        productDetails: self.productDetails,\n        activeProduct: self.activeProduct,\n        defaultIndex: self.defaultIndex,\n        setActiveProduct: self.setActiveProduct,\n        costs: self.costs\n    };\n}\n\n// Activates knockout.js\nko.applyBindings(new AppViewModel(), document.getElementById('commerceProductApp'));\n\n// uat\n// easycareuat\n// U@Testing123\n// APCO-02\n// 4T1BF1FK7GU566533"]}