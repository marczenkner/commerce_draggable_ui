<html>

<head>
    <link href="./css/app.css" type="text/css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="http://knockoutjs.com/downloads/knockout-3.0.0.debug.js" type="text/javascript"></script>
</head>

<body id="commerceProductApp">

<div class="app-view">
    
    <div class="scroll-area app-view-column input-view" data-bind="style: {left: searchVinView() ? 0 : '-100%'}">
        
        <div class="scroll-area-column horizontal-draggable">
            <div class="inputs-wrapper" data-bind="foreach: formData, style {marginTop: inputMarginTop}">
                <div class="card" data-bind="css: {'is-current': isCurrent}, style: {'height': $parent.cardHeight}">
                    
                    <div class="input-button back" data-bind="if: $parent.activeInputIndex() > 0">
                        <div class="button" data-bind="event: {click: $parent.decrementInputIndex.bind($data)}">
                        </div>
                    </div>
                    
                    <div class="card-content">
                        <div class="input-label" data-bind="text: displayName"></div>
                        <div data-bind="if: type === 'text'">
                            <input data-bind="value: value, event: {blur: callBack}" />
                        </div>
                        <div data-bind="if: type === 'button'">
                            <button data-bind="event: {click: callBack}">Get Quote</button>
                        </div>
                    </div>
                    
                    <div class="input-button forward" data-bind="if: $parent.activeInputIndex() < $parent.formData.length - 1">
                        <div class="button" data-bind="event: {click: $parent.incrementInputIndex.bind($data)}">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
    
    <div class="scroll-area app-view-column products-view" data-bind="style: {left: !searchVinView() ? 0 : '-100%'}">
        
        <div class="active-card-frame" data-bind="style: {order: 1}"></div>
        
        <div class="back-to-search" data-bind="event: {click: backToSearch}, style: {order: 2}"></div>
    
        <!-- Products column -->
        
        <div class="scroll-area-column horizontal-draggable" data-bind="style: {order: 3}">
            <!--<div class="card-count rate-count" data-bind="visible: !pageBusy()">-->
                <!--<div>-->
                    <!--<span data-bind="text: activeProductIndex() + 1"></span> of <span data-bind="text: productCount"></span><br />-->
                    <!--<span data-bind="text: 'Products'"></span>-->
                <!--</div>-->
            <!--</div>-->
            <div class="scroll-wrapper products-wrapper" data-bind="foreach: productsWithDetails">
                <div class="card">
                    <div class="card-content" data-bind="css: {'selected-option': isSelected()}">
                        <div class="card-content-overlay"></div>
                        <div class="card-status-wrapper">
                            <div class="card-status" data-bind="text: 'Suggested'"></div>
                        </div>
                        <div class="card-title" data-bind="text: DisplayName"></div>
                        <div class="card-body" data-bind="text: 'Description text is lorem impsum etc..'"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Active Terms -->
        <div class="scroll-area-column horizontal-draggable" data-bind="visible: displayDataType() !== 'Price',style: {order: displayDataType() === 'Term' ? 4 : 5}">
            <!--<div class="card-count term-count" data-bind="visible: !pageBusy()">-->
                <!--<div>-->
                    <!--<span data-bind="text: activeTermIndex"></span>-->
                    <!--<span data-bind="text: activeTermValue"></span>-->
                <!--</div>-->
            <!--</div>-->
            <div class="scroll-wrapper term-wrapper" data-bind="foreach: activeProductTerms">
                <div class="card">
                    <div class="card-content">
                        <!--<div class="card-content" data-bind="css: {'selected-option': isSelected()}">-->
                        <div class="card-content-overlay"></div>
                        <div data-bind="text: $data + ' Months'"></div>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Active Miles -->
        <div class="scroll-area-column horizontal-draggable" data-bind="visible: displayDataType() !== 'Price',style: {order: displayDataType() === 'Miles' ? 4 : 5}">
            <!--<div class="card-count miles-count" data-bind="visible: !pageBusy()">-->
                <!--<div>-->
                    <!--<span data-bind="text: activeMilesIndex"></span>-->
                    <!--<span data-bind="text: activeMilesValue"></span>-->
                <!--</div>-->
            <!--</div>-->
            <div class="scroll-wrapper miles-wrapper" data-bind="foreach: activeProductMiles">
                <div class="card">
                    <div class="card-content">
                    <!--<div class="card-content" data-bind="css: {'selected-option': isSelected()}">-->
                        <div class="card-content-overlay"></div>
                        <div data-bind="text: Math.trunc($data/1000) + 'k Miles'"></div>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Active rates by Price -->
        <div class="scroll-area-column horizontal-draggable" data-bind="visible: activeProductRates && displayDataType() === 'Price', style: {order: 10}">
            <!--<div class="card-count rate-count" data-bind="visible: !pageBusy()">-->
                <!--<div>-->
                    <!--<span data-bind="text: activeRateIndex() + 1"></span> of <span data-bind="text: planCount"></span><br />-->
                    <!--<span data-bind="text: 'Plans'"></span>-->
                <!--</div>-->
            <!--</div>-->
            <div class="scroll-wrapper cost-wrapper" data-bind="foreach: activeProductRates">
                <div class="card">
                    <div class="card-content" data-bind="css: {'selected-option': isSelected()}">
                        <div class="card-content-overlay"></div>
                        <div data-bind="text: '$' + DealerCost.toFixed(2)"></div>
                        <div>
                            <span class="small-text" data-bind="text: RatedTerm.TermMonths + ' months'"></span>
                            <span class="small-text" data-bind="text: Math.trunc(RatedTerm.TermMiles/ 1000) + 'k miles'"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="info-area" data-bind="style: {order: 11}">
    
            <div class="display-data-type">
                <div class="data-type-wrapper">
                    <div class="data-type-button" data-bind="event: {click: setValueType.bind($data, 'Price')}, css: {'active-type-button': displayDataType() === 'Price'}">Price</div>
                    <div class="data-type-button" data-bind="event: {click: setValueType.bind($data, 'Miles')}, css: {'active-type-button': displayDataType() === 'Miles'}">Miles</div>
                    <div class="data-type-button" data-bind="event: {click: setValueType.bind($data, 'Term')}, css: {'active-type-button': displayDataType() === 'Term'}">Term</div>
                </div>
            </div>
            
            <button class="add-product" data-bind="event: {'click': addProductWithRate.bind($data)}, disable: isDragging"></button>
            
            <div class="my-plan">
                <div class="text flex-row">
                    <div class="border-right padding-right text-center max-width-50">
                        <div>Term: <br />(Months)</div>
                        <div class="text-center margin-top">
                            <input data-bind="value: loanTerm" />
                        </div>
                    </div>
                    <div class="padding-left text-center max-width-50">
                        <div>Products<br />selected:</div>
                        <div class="big-text margin-top" data-bind="text: selectedProductCount"></div>
                    </div>
                </div>
                <div class="text flex-row">
                    <div class="border-right padding-right text-center max-width-50">
                        <div>Monthly<br />Cost:</div>
                        <div class="big-text margin-top">
                            <sup>$</sup>
                            <span data-bind="text: monthlyCost"></span>
                        </div>
                    </div>
                    <div class="padding-left text-center max-width-50">
                        <div>Total<br />Cost:</div>
                        <div class="big-text margin-top">
                            <sup>$</sup>
                            <span data-bind="text: planCost"></span>
                        </div>
                    </div>
                </div>
                <div class="text flex-row">
                    <div class="border-right padding-right text-center max-width-50">
                        <div>Deductible:</div>
                        <div class="big-text margin-top">
                            <sup>$</sup>
                            <span data-bind="text: activeDeductible"></span>
                        </div>
                    </div>
                    <div class="padding-left text-center max-width-50">
                        <div>Coverage:</div>
                        <div class="small-text margin-top">
                            <sup>$</sup>
                            <span data-bind="text: activeCoverage"></span>
                        </div>
                    </div>
                </div>
                <div class="text flex-row">
                    <div class="border-right padding-right text-center max-width-50">
                        <div>Deductible:</div>
                        <div class="big-text margin-top">
                            <span data-bind="text: activeProductTerms"></span>
                        </div>
                        <div class="big-text margin-top">
                            <span data-bind="text: activeProductMiles"></span>
                        </div>
                        <div class="big-text margin-top">
                            <span data-bind="text: activeProductIndex"></span>
                        </div>
                        <div class="big-text margin-top">
                            <span data-bind="text: activeRateIndex"></span>
                        </div>
                        <div class="big-text margin-top">
                            <span data-bind="text: activeTermIndex"></span>
                        </div>
                        <div class="big-text margin-top">
                            <span data-bind="text: activeMilesIndex"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
    
    <div class="selected-products-drawer-overlay" data-bind="css: {'visible': showSelectedProductsDrawer() && selectedProductCount()}, event: {'click': showHideOptionsDrawer}">
    </div>
    
    <div class="selected-products-drawer" data-bind="css: {'visible': showSelectedProductsDrawer}">
        <div class="hide-drawer-wrapper" data-bind="visible: showSelectedProductsDrawer() || selectedProductCount()">
            <div class="hide-drawer" data-bind="event: {'click': showHideOptionsDrawer}"></div>
        </div>
        <div class="selected-products-wrapper" data-bind="foreach: productsWithDetails">
            <div class="selected-products-card" data-bind="visible: isSelected">
                <div class="close-products-card" data-bind="event: {'click' : $parent.removeProductWithRate.bind($data, $index)}"></div>
                <div class="selected-products-card-content">
                    <div class="selected-products-title" data-bind="text: DisplayName">
                    </div>
                    <div class="selected-products-price">
                        <div data-bind="foreach: $parent.Rates">
                            <span>RAte</span><sup>$</sup>
                            <!--<span data-bind="if: isSelected">-->
                                <!--<span data-bind="text: DealerCost"></span>-->
                            <!--</span>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="main-overlay" data-bind="css: {visible: pageBusy}">
    <div class="loader">
        <div class="dbl-spinner"></div>
        <div class="dbl-spinner dbl-spinner--2"></div>
    </div>
    <div class="message" data-bind="if: vehicleDetails">
        <div data-bind="text: 'Looking for products for your ' + vehicleDetails()[8].Value + ' ' + vehicleDetails()[5].Value + ' ' + vehicleDetails()[7].Value"></div>
    </div>
</div>


<script src="./libs/greensock/TweenMax.js"></script>
<script src="./libs/greensock/utils/Draggable.js"></script>
<script src="./libs/greensock/plugins/ThrowPropsPlugin.js"></script>
<script src="./index.js"></script>
<script src="./js/app.js"></script>
<script src="./js/viewModel.js"></script>
</body>

</html>